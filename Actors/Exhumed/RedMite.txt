Actor RedMite
{
    scale 0.65
    speed 6
    radius 18
    height 24
    health 40
    painchance 255
    meleedamage 1
    meleerange 17
    bloodcolor Green
	obituary "%o became a meal for the Terrainian's."
	Species "Enemies"
    +FLOORCLIP
	+SHOOTABLE
	+COUNTKILL
	-SOLID
	+CANPUSHWALLS
	+CANUSEWALLS
	+ACTIVATEMCROSS
	+CANPASS
	+ISMONSTER
	+NOINFIGHTING
	Tag "Terrainian"
	DropItem "PowerslaveSoulPowerOrbSpawn" 64,1
    meleesound "redmite/bite"
    painsound "redmite/pain"
    deathsound "redmite/death"
	PainChance "ShrinkerDMG", 0
    States
    {
    Spawn:
		PSEN D 0
		PSEN D 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		PSEN D 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		PSEN D 0 A_GiveInventory("AlreadySpawned",1)
	Spawn2:
		PSEN D 5 A_Look
		loop
    See:
		PSEN AABBCC 1 A_Chase
		PSEN A 0 A_Jump(32,1)
		loop
		PSEN A 0 A_PlaySound("redmite/jump")
		PSEN E 0 ThrustThingZ(0,32,0,1)
		PSEN E 16 A_Recoil(-5)  
		loop
    Melee:
		TNT1 A 0 A_ChangeFlag("NOPAIN",0)
		PSEN F 3 A_FaceTarget
		PSEN G 3 A_CustomMeleeAttack(Random(1,3))
		PSEN F 3 A_FaceTarget
		goto See
    Pain:
		PSEN D 0 A_Pain
		goto See
	Pain.MightyBoot:
		TNT1 A 0 A_ChangeFlag("NOPAIN",1)
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		PSEN D 2 A_FaceTarget
		TNT1 A 0 A_Recoil(14)
		PSEN D 16 A_Pain
		Goto See
	Pain.MarathonStun:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_GiveInventory("NothingSpeed")
		TNT1 A 0 A_PlaySoundEx("marathon/tech50/stun","body",0,0)
		PSEN D 5 A_FaceTarget
		TNT1 A 0 A_Gravity
		PSEN D 30 A_Pain
		PSEN D 70
		Goto See
    Death:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)	
		PSEN H 4 A_Scream
		PSEN I 5 A_NoBlocking
	    TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_CustomMissile("MiteGib1",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib2",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib3",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))  
		TNT1 A 0 A_CustomMissile("MiteGib4",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib5",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib6",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib7",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib8",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib1",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib2",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib3",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))  
		TNT1 A 0 A_CustomMissile("MiteGib4",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib5",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))  
		TNT1 A 0 A_CustomMissile("MiteGib6",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib7",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		TNT1 A 0 A_CustomMissile("MiteGib8",0+Random(5,7),0+Random(35,-35),0+Random(0,370),2,0+random(5,50))
		PSEN J 4
		TNT1 A 1 
		stop
	Death.RottDisintegrate:
		"####" "#" 0 A_ChangeFlag("SOLID", 0)
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_NoBlocking	
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 0 A_Stop
		"####" "#" 0 A_ChangeFlag("SHOOTABLE",FALSE)
		"####" "#" 0 A_ChangeFlag("NOGRAVITY",TRUE)
		"####" "#" 0 A_ChangeFlag("FLOORCLIP",TRUE)
		"####" "#" 0 A_SpawnItem("RGodModeDeathTiny")
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.4,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.3,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.2,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.1,0)
		stop
	Disintegrate:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_NoBlocking
		"####" "#" 0 A_ChangeFlag("DONTGIB",1)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_ChangeFlag("SOLID",FALSE)
		"####" "#" 0 A_ChangeFlag("SHOOTABLE",FALSE)
		"####" "#" 0 A_ChangeFlag("NOGRAVITY",TRUE)
		"####" "#" 0 A_ChangeFlag("FLOORCLIP",TRUE)
		"####" "#" 0 A_Stop
		"####" "#" 3 A_SpawnItem("DisintEffectTiny",0,10)
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.4,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.3,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.2,0)
		"####" "#" 0 ACS_NamedExecuteAlways("ExtraDeathFX",0,1)
		"####" "#" 2 A_SetTranslucent(0.1,0)
        stop
	Death.Nuke:
		"####" "#" 0 A_ChangeFlag("SOLID", 0)
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_NoBlocking		
		"####" "#" 0 A_SpawnItem("WTNukeDeathTiny")
		"####" "#################" 3 A_Fadeout(0.05)
		stop	
	Pain.LifeLeech: 
		TNT1 A 0 A_GiveToTarget("SerpentHealth", random(1,2))
		TNT1 A 0 A_GiveToTarget("HealthBonus", 1)
		Goto Pain		
	Pain.Vodoo:
		TNT1 A 0 A_GiveToTarget("Voodoo", 1)
		Goto Pain
	Death.Vodoo:
	Death.VoodooPuff:
	Death.DynamiteCoop:
	Death.Dynamite:
	Death.CalebNapalm:
	Death.Shock:	  
	Death.Vodoo:
		TNT1 A 0 A_JumpIfHealthLower(-20,"XDeathForCaleb")
	Death.Tesla:
	Death.CalebBullet:	
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
		Goto Death
	XDeathForCaleb:
	    TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_Jump(96,"XDeath")
        TNT1 A 0 A_GiveToTarget("CalebDMTaunt1",1)
		Goto XDeath		
	Death.EradExplosive:
	Death.EradNova:
	Death.EradShock:
	Death.EradExplosive2:	
		TNT1 A 0 A_JumpIfHealthLower(-5,"XDeathForCatBitch")
    Death.EradDisc:
	Death.EradPiercingDart:
	Death.EradGreenFire:
	Death.EradCoopGreenFire:
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("EleenaDMTaunt1", 1)
		Goto Death
	XDeathForCatBitch:
	    TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_Jump(96,"XDeath")
        TNT1 A 0 A_GiveToTarget("EleenaGibTaunt",1)
		Goto XDeath
	Death.DukeExplosive:		
	Death.DukeDamage:
	Death.DukePistol:
		TNT1 A 0 A_Jump(218,"Death")
		TNT1 A 0 A_GiveToTarget("DukeKillTaunt",1)
		goto Death
	Death.MightyBoot:
		TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
		TNT1 A 0 A_Jump(64,"Death")
		TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
		goto Death
	Death.PSRAPower:
	Death.PSRAPowerCoop:
	Death.PSExplosive:
	Death.PSExplosiveCoop:
		TNT1 A 0 A_JumpIfHealthLower(-30, "XDeathForJon")
	Death.PSBullet:
	Death.PSFire:	
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("JonDMTaunt1", 1)
		Goto Death
	XDeathForJon:
	    TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_Jump(96,"XDeath")
        TNT1 A 0 A_GiveToTarget("JonDMTaunt1",1)
		Goto XDeath		
	Death.LeonardDamage2:
	Death.LeonardDamage3:
		TNT1 A 0 A_JumpIfHealthLower(-20, "XDeathForLeonard")
	Death.LeonardDamage0:
	Death.LeonardDamage1:	
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("LeonardDMTaunt1", 1)
		Goto Death
	XDeathForLeonard:
	    TNT1 A 0 A_UnsetSolid
        TNT1 A 0 A_Jump(96,"XDeath")
        TNT1 A 0 A_GiveToTarget("LeonardGibTaunt",1)
		Goto XDeath		
	Death.DukeIce:
		"####" "#" 0 A_PlaySound("duke/enemyfreeze")
		"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
		"####" "#" 0 A_Jump(218,"Ice")
		"####" "#" 0 A_GiveToTarget("DukeKillTaunt",1)
	Ice:
	Death.HexenIce:
	Death.WTMeleeIce:
	Death.WTRangedIce:
	Death.Ice:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_NoBlocking
		"####" "#" 0 A_GenericFreezeDeath
		"####" "#" 70 A_UnsetSolid
		"####" "#" 0 A_IceGuyDie
		"####" "#" 1 A_IceGuyDie
		TNT1 A 0
		stop
	Death.ZorchPistol:
	Death.Zorch:
	Death.ZorchKamikaze:
	Death.PhasingZorch:
	Death.ZorchSpectral:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
		"####" "#" 0 A_ChangeFlag("DONTGIB",1)
		"####" "#" 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
		"####" "#" 3 A_SpawnItem("ZorchEffectTiny")
		"####" "#" 0 A_GiveInventory("EnemyZorched",1)
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 A_Scream
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 A_NoBlocking
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 3 A_SetTranslucent(0.4,0)
		"####" "#" 3 A_SetTranslucent(0.3,0)
		"####" "#" 3 A_SetTranslucent(0.2,0)
		"####" "#" 3 A_SetTranslucent(0.1,0)
		TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A -1
		stop
	Death.SWFist:
		TNT1 A 0 A_GiveToTarget("SWLoWangBloody", 1)
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_SpawnItemEx("SWFisted")
		TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
		goto Death	
	Death.SWKatana:
		TNT1 A 0 A_GiveToTarget("SWLoWangBloody", 1)
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_SpawnItemEx("SWKatanad")
		TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
		goto Death	
	Death.SWShuriken:
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_SpawnItemEx("SWShurikend")
		TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
		goto Death
	Death.SWSticky:
	Death.SWStickyCoop:	
	Death.SWGrenade:
	Death.SWNuke:
	Death.SWRocket:
	Death.SWRailgun:
	Death.SWRailgunCoop:
	Death.SWNukeCoop:
	Death.SWFlame:
	Death.SWFlame2:
	Death.SWFlame2Coop:
	Death.SWFlame3:	
		TNT1 A 0 A_JumpIfHealthLower(-3,"XDeathForWang")
    Death.SWBullet:	  
		TNT1 A 0 A_Jump(218, "Death")
		TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
		goto Death
	XDeathForWang:
	    TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_Jump(218, "XDeath")	
        TNT1 A 0 A_GiveToTarget("LoWangDMTaunt2",1)
		goto XDeath		
  }
}

Actor MiteGib1
{
    BounceFactor 0.2
    +DOOMBOUNCE
	+CLIENTSIDEONLY
    Speed 8
    Projectile
    Scale 0.60
    -NOGRAVITY
    -NOBLOCKMAP
    states
    {
    Spawn:
		PSE_ A 1
//		loop
    Death:
		PSE_ A 250
		PSE_ A 1 A_FadeOut
		goto Death+1
	}
}

Actor MiteGib2 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ B 1
//		loop
    Death:
		PSE_ B 250
		PSE_ B 1 A_FadeOut
		goto Death+1
    }  
}

Actor MiteGib3 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ C 1
//		loop
	Death:
		PSE_ C 250
		PSE_ C 1 A_FadeOut
		goto Death+1
    }  
}

Actor MiteGib4 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ D 1
//		loop
    Death:
		PSE_ D 250
		PSE_ D 1 A_FadeOut
		goto Death+1
    }  
}

Actor MiteGib5 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ E 1
//		loop
	Death:
		PSE_ E 250
		PSE_ E 1 A_FadeOut
		goto Death+1
    } 
}

Actor MiteGib6 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ F 1
//		loop
    Death:
		PSE_ F 250
		PSE_ F 1 A_FadeOut
		goto Death+1
    }  
}

Actor MiteGib7 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ G 1
//		loop
    Death:
		PSE_ G 250
		PSE_ G 1 A_FadeOut
		goto Death+1
    }  
}

Actor MiteGib8 : MiteGib1
{
    states
    {
    Spawn:
		PSE_ H 1
//		loop
    Death:
		PSE_ H 250
		PSE_ H 1 A_FadeOut
		goto Death+1
    }
}

Actor PowerslaveSoulPowerOrbSpawn {
	Height 5
	Radius 5
	+NOCLIP
	+FLOORCLIP
	States {
		Spawn:
			TNT1 A 20
			TNT1 A 1 Bright A_SpawnItemEx("PowerslaveSoulPowerOrbSpawner",0,0,0)
			Stop
	}
}

Actor PowerslaveSoulPowerOrbSpawner {
	Height 5
	Radius 5
	scale 0.45
	RenderStyle Add
	+NOCLIP
	+FLOORCLIP
	States {
		Spawn:
			TNT1 A 0
		    TNT1 A 0 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,4,0)
			TNT1 A 0 A_PlaySound("bastet/warpin")
			PS78 ABCDEFG 3 Bright
			PS78 H 2 Bright
			TNT1 A 0 A_JumpIfInventory("WeaponDropToken", 1, "C")
			TNT1 A 0 A_Jump(128,"A","B")
			PS78 H 1 Bright A_SpawnItemEx("PowerSlaveSoulAmmoClip",0,0,0)
			Stop
	    A:		
			PS78 H 1 Bright A_SpawnItemEx("PowerSlaveSoulAmmoShell",0,0,0)
			Stop
		B:	
			PS78 H 1 Bright A_SpawnItemEx("PowerSlaveSoulPower",0,0,0)
			Stop	
		C:
			TNT1 A 0 A_Jump(128,"D")
			PS78 H 1 Bright A_SpawnItemEx("PowerSlaveSoulWeapon2",0,0,0)
			Stop
		D:
			PS78 H 1 Bright A_SpawnItemEx("PowerSlaveSoulWeapon4",0,0,0)
			Stop			
	}
}

Actor PowerSlaveSoulAmmoClip : Ammo1Small {
	Scale 0.45
	+FLOORCLIP
	+FLOATBOB
	+DROPPED
	+DONTGIB
	RenderStyle Add
    Inventory.PickupMessage "Soul Ammo"
	Inventory.PickupSound "ps/soul/ammo"
	States
    {
      Spawn:
        PS78 K 5 Bright
        Loop
    }
}

Actor PowerSlaveSoulAmmoShell : Ammo2Small {
	Scale 0.45
	+FLOORCLIP
	+FLOATBOB
	+DROPPED
	+DONTGIB
	RenderStyle Add
    Inventory.PickupMessage "Soul Ammo"
	Inventory.PickupSound "ps/soul/ammo"
	States
    {
      Spawn:
        PS78 K 5 Bright
        Loop
    }
}

Actor PowerSlaveSoulPower : Health {
	height 20
	radius 16
	RenderStyle Add
	Alpha 1
	Scale 0.45
	Inventory.Amount 5
	Inventory.PickupMessage "Soul Health"
	Inventory.PickupSound "ps/soul/mana"
	+FLOORCLIP
	+FLOATBOB
	+FANCYPICKUPSOUND
	+DROPPED
	+DONTGIB
	States
	{
	Spawn:
		PS78 L 5 Bright
		Loop
	}	
}

Actor PowerSlaveSoulWeapon2 : SamsaraSlotTwoDrop {
	Scale 0.45
	+FLOATBOB
	+FLOORCLIP
	+DONTGIB
	States
	{
	Spawn:
		PS78 M 5 Bright
		Loop
	}	
}	

Actor PowerSlaveSoulWeapon4 : SamsaraSlotFourDrop {
	Scale 0.45
	+FLOATBOB
	+FLOORCLIP
	+DONTGIB
	States
	{
	Spawn:
		PS78 M 5 Bright
		Loop
	}	
}	