Actor TotenkopfEnemy
{
	Monster
	Bloodtype "Totenkopf_Blood"
	Radius 16
	Height 48
	Gibhealth 25
	ActiveSound "Totenkopf/GuardCombat"
	Deathsound "Totenkopf/GuardDeath"
	Seesound "Totenkopf/GuardSight"
	Species "Totenkopf"
	Scale 1.05
	+NOINFIGHTING
	+THRUGHOST
	+FLOORCLIP
}

Actor Totenkopf_PistolEnemyDrop : Goldeneye_PP7EnemyDrop
{
	Gravity 1.0
	Inventory.PickupMessage "Walther P38 Pistol"
	States
	{
		Spawn:
			TK02 M -1
			Stop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("MarathonClass", 1, "PickupMarathon")
			TNT1 A 0 A_JumpIfInventory("HexenClass", 1, "PickupHexen")
			TNT1 A 0 A_JumpIfInventory("WolfenClass", 1, "PickupWolfen")
			TNT1 A 0 A_JumpIfInventory("BondClass", 1, "PickupBond")
//			TNT1 A 0 A_JumpIfInventory("WitchavenClass", 0, "PickupWitchaven")	Why?
			TNT1 A 0 A_PlaySound("Totenkopf/getweapon")
			TNT1 A 0 A_JumpIfInventory("Clip",0,1)
			Goto Pickup+6
			TNT1 A 1 A_GiveInventory("Clip", 4)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 0, 1) & 1) == 1, "PickupSuccess")
			stop	
		PickupWitchaven:
			TNT1 A 0 A_JumpIfInventory("Clip",0,1)
			Goto PickupWitchaven+1
			TNT1 A 0 A_PlaySound("Totenkopf/getweapon")
			TNT1 A 1 A_GiveInventory("Clip", 8)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 0, 1) & 1) == 1, "PickupSuccess")
			stop
		PickupWolfen:
			TNT1 A 0 A_JumpIfInventory("Clip",0,1)
			Goto PickupWolfen+1
			TNT1 A 0 A_PlaySound("Totenkopf/getweapon")
			TNT1 A 0 A_GiveInventory("Totenkopf_IHaveDualPistols")
			TNT1 A 1 A_GiveInventory("Clip", 3)
			TNT1 A 1 A_GiveInventory("Samsara_ModeWeaponChange", 1)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 0, 1) & 1) == 1, "PickupSuccess")
			stop	
		PickupMarathon:
			TNT1 A 0 A_JumpIfInventory("Clip",0,1)
			Goto PickupMarathon+1
			TNT1 A 0 A_PlaySound("marathon/itemget")
			TNT1 A 0 A_SetBlend("Green", 0.4, 4)
			TNT1 A 1 A_GiveInventory("Clip", 4)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 0, 1) & 1) == 1, "PickupSuccess")
			stop
		PickupBond:
			TNT1 A 0 A_JumpIfInventory("Clip",0,1)
			Goto PickupBond+1
			TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFailure")
			TNT1 A 0 A_GiveInventory("Goldeneye_PP7DualToken", 1)
			TNT1 A 0 A_PlaySound("Goldeneye/Weaponup")
			TNT1 A 1 A_GiveInventory("Clip", 7)
			TNT1 A 0 A_JumpIf((ACS_NamedExecuteWithResult("SamsaraGiveWeapon", 0, 1) & 1) == 1, "PickupSuccess")
			stop
		PickupSuccess:
			TNT1 A 1
			Stop	
		PickupFailure:
			TNT1 A 0 A_ChangeFlag("FLOATBOB", 0)
			fail
	}
}	

Actor Totenkopf_Tracer_Enemy : Totenkopf_Tracer
{
	Damage (4+(random(0,256)%12))
	DamageType "TotenkopfBullet"
	States
	{
		Spawn:
			TNT1 A 1
			Loop
		Death:
		Crash:
			TNT1 A 0 A_Playsound("Totenkopf/Ricochet", CHAN_BODY)
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_Tracer",1,24,48) == 1, 1)
			TNT1 A 0 A_SpawnItemEx("Totenkopf_Tracer_Spark",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			Stop
		XDeath:
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_Tracer",1,24,48) == 1, 1)
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_BloodGenerator_Offsets")==1,1)
			TNT1 A 1 Bright
			TNT1 A 0 A_GiveInventory("Totenkopf_BloodGenerator",1,AAPTR_TRACER)
			TNT1 A 1
			Stop
	}
}

Actor Totenkopf_Kar98kEnemyDrop : SamsaraSlotTwoDrop
{
	States
	{
		Spawn:
			TK03 M -1
			Stop
	}
}

Actor Totenkopf_MP40EnemyDrop : SamsaraSlotFourDrop
{
	States
	{
		Spawn:
			TK04 K -1
			Stop
	}
}	

Actor Totenkopf_STG44EnemyDrop : SamsaraSlotThreeDrop
{
	States
	{
		Spawn:
			TK05 F -1
			Stop
	}
}

Actor Totenkopf_FlameThrowerEnemyDrop : SamsaraUniquePickup1
{
	States
	{
		Spawn:
			TK06 F -1
			Stop
	}
}

Actor Totenkopf_ChaingunEnemyDrop : SamsaraSlotSixDrop
{
	States
	{
		Spawn:
			TK08 F -1
			Stop
	}
}

Actor Totenkopf_PanzerschreckEnemyDrop : SamsaraSlotFiveDrop
{
	States
	{
		Spawn:
			TK07 H -1
			Stop
	}
}

Actor Totenkopf_MG42EnemyDrop : SamsaraUniquePickup2
{
	States
	{
		Spawn:
			TK11 F -1
			Stop
	}
}				