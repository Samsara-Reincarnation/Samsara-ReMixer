Actor HECU_Grunt1 : SamsaraMonsterHumanoid
{
	Height 52
	Radius 20
	Monster
	Scale 0.85
	Health 60
	speed 8
	+MISSILEMORE
	+MISSILEEVENMORE
	+NOINFIGHTING
	+NOBLOODDECALS
	+DONTGIB
	MeleeRange 86
	Painchance 100
	Seesound "HECU/Alert"
	ActiveSound "HECU/Taunt"
	PainSound "HECU/Pain"
	DeathSound "HECU/Death"	
	BloodType "HalfLifeBlood"
	DropItem "HL_HECU_MP5Drop", 256, 1
	Tag "Hazardous Environment Combat Unit Soldier"
    Obituary "%o was killed by a Hazardous Environment Combat Unit Soldier."
    DamageFactor "Mace", 1.1
    DamageFactor "DragonClaw", 1.5
    PainChance "MightyBoot", 255
	PainChance "MarathonStun", 255	
	Species "HLEnemies"
	States
	{
		Spawn:
			HL00 A 0
			HL00 A 1 A_JumpIfInventory("AlreadySpawned",1,"SpawnStandard")
			HL00 A 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
			HL00 A 0 ACS_NamedExecuteAlways("HalfLifeFootStepGeneratorEnemy")
			HL00 A 0 A_GiveInventory("HLSpeedTokens",8)
			HL00 A 0 A_GiveInventory("AlreadySpawned",1)
		SpawnStandard:
			TNT1 A 0
			TNT1 A 0 A_Jump(128,"Spawn2")
		Spawn1:	
			HL00 A 0 A_JumpIfInventory("HECUCommanderQuestion", 1, 1)
			Goto DecideNormalQuote
			HL00 A 0 A_Jump(192,"NormalSpawnAnim1")
			HL00 A 0 A_TakeInventory("HECUCommanderQuestion", 1)
			HL00 A 0 A_Playsound("HECU/Answer", CHAN_VOICE)
			HL00 A 0 A_Jump(256,3)
			HL00 A 0 A_Jump(220,2)
		DecideNormalQuote:	
			HL00 A 0 A_Jump(114,2)		
			HL00 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			HL00 A 0
		NormalSpawnAnim1:	
			HL00 ABCDEFGHIJKLMNO 4 A_Look
			Goto Spawn1
		Spawn2:
			HL14 A 0 A_JumpIfInventory("HECUCommanderQuestion", 1, 1)
			Goto DecideNormalQuote2
			HL14 A 0 A_Jump(192,"NormalSpawnAnim2")			
			HL14 A 0 A_TakeInventory("HECUCommanderQuestion", 1)
			HL14 A 0 A_Playsound("HECU/Answer", CHAN_VOICE)
			HL14 A 0 A_Jump(256,3)
			HL14 A 0 A_Jump(220,2)
		DecideNormalQuote2:	
			HL14 A 0 A_Jump(114,2)
			HL14 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			HL14 A 0
		NormalSpawnAnim2:	
			HL14 ABCDEFGHIJKLMNOPQR 4 A_Look		
			Goto Spawn2
		Idle:
			TNT1 A 0 A_JumpIfHealthLower(50,"LimpWalk")
			HL22 A 1
			HL22 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			Goto IdleLoop
		IdleLoop:
			HL22 A 0 A_JumpIfHealthLower(50,"LimpWalk")
			HL22 AB 2 A_Wander		HL22 C 0 A_Look
			HL22 CD 2 A_Wander		HL22 E 0 A_Look			
			HL22 EF 2 A_Wander		HL22 G 0 A_Look			
			HL22 GH 2 A_Wander		HL22 I 0 A_Look			
			HL22 IJ 2 A_Wander		HL22 K 0 A_Look			
			HL22 KL 2 A_Wander		HL22 M 0 A_Look			
			HL22 MN 2 A_Wander		HL22 O 0 A_Look			
			HL22 OP 2 A_Wander		HL22 Q 0 A_Look			
			HL22 QR 2 A_Wander		HL22 S 0 A_Look			
			HL22 STU 2 A_Wander		HL22 A 0 A_Look			
			Loop
		LimpWalk:
			HL17 A 1
			HL17 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			Goto LimpWalkLoop
		LimpWalkLoop:
			HL17 AB 2 A_Wander
			HL17 C 0 A_Look
			HL17 CD 2 A_Wander
			HL17 E 0 A_Look			
			HL17 EF 2 A_Wander
			HL17 G 0 A_Look			
			HL17 GH 2 A_Wander
			HL17 I 0 A_Look			
			HL17 IJ 2 A_Wander
			HL17 K 0 A_Look			
			HL17 KL 2 A_Wander
			HL17 M 0 A_Look			
			HL17 MN 2 A_Wander
			HL17 O 0 A_Look			
			HL17 O 2 A_Wander
			HL17 A 0 A_Look				
			Loop
		SetSee:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto See
		See:
			TNT1 A 0 A_JumpIfHealthLower(50,"LimpRun")
			HL01 A 1
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			Goto SeeLoop
		SeeLoop:
			HL01 A 0 A_JumpIfHealthLower(50,"LimpRun")
			HL01 ABCDEFGHI 2 A_Chase
			Loop
		LimpRun:
			HL16 A 1
			HL16 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			Goto LimpRunLoop
		LimpRunLoop:
			HL16 ABCDEFGHI 2 A_Chase
			Loop
		Missile:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("MP5/FireBurst")
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate
		KeepFiring:
			HL02 A 5
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1
		Retaliate:
			TNT1 A 0
			Goto See			
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_MP5_DummyReload",50)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto See
		ThrowGrenade:
			TNT1 A 0 A_Playsound("HECU/Throw", CHAN_VOICE)
			HL13 ABCDEFGHIJKLM 3 A_FaceTarget
			HL13 N 0 A_CustomMissile("HLHECUGrenade", 32)
			HL13 NOPQRS 2
			TNT1 A 0 A_Jump(100,"RunAway")
			TNT1 A 0 A_JumpIfCloser(464,"Cover")
			TNT1 A 0 A_Jump(164,"RunAway")			
			TNT1 A 0 A_JumpIfCloser(729,"Cover")			
			Goto See
		RunAway:
			HL01 A 1
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			HL01 A 0 A_ChangeFlag(FRIGHTENED,1)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(24,"SetCover")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(12,"SetSee")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)			
			HL01 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto See		
		SetCover:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto Cover
		Cover:
			TNT1 A 0 A_Playsound("HECU/Grenade", CHAN_VOICE)
			HL21 ABCDEFGHIJKLMNOPQRSTU 2
			Goto See
		Melee:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_Jump(41,"PlaceGrenade")
		Kick:	
			HL15 ABCD 4 A_FaceTarget
			HL15 E 3 A_CustomMeleeAttack(Random(1,10)*2,"","")
			HL15 FGHIJK 2
			Goto See
		PlaceGrenade:
			HL20 ABCDEFGHIJ 3 A_FaceTarget
			TNT1 A 0 A_SpawnItemEx("HLHECUGrenade_Ground",3,-15,0,0,0,0,0,SXF_NOCHECKPOSITION)
			HL20 KLMNO 2
			Goto RunAway
		Pain:
			TNT1 A 0 A_Pain
			HL18 ABCDEF 3
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto See
		Pain.MightyBoot:
			TNT1 A 0 A_ChangeFlag("NOPAIN",1)
			TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
			HL18 A 3 A_FaceTarget
			TNT1 A 0 A_Recoil(14)
			HL18 B 3 A_Pain
			HL18 CDEF 3
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto See
		Death:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)					
			TNT1 A 0 A_Jump(128,"Death2","Death3","Death4","Death5","Death6")
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL07 ABCDE 4
			HL07 F 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL07 FGHI 4
			HL07 I -1
			Stop
		Death2:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL08 ABCD 4
			HL08 E 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL08 EFGHIJKLMNOPQRS 4
			HL08 S -1
			Stop	
		Death3:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL09 ABCDE 4
			HL09 E 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL09 EFGHIJKLMNO 4
			HL09 O -1
			Stop
		Death4:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL10 ABCDEFGHIJKLMNOPQRST 4
			HL10 U 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL10 UVWX 4
			HL10 X -1
			Stop				
		Death5:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL11 ABCDEFGH 4
			HL11 I 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL11 IJKLMNOPQRSTU 4
			HL11 U -1
			Stop			
		Death6:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL12 ABCD 4
			HL12 E 0 A_PlaySound("HLCorpse/Fall", CHAN_BODY, 0.9)
			HL12 EFG 4
			HL12 G -1
			Stop	
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:	
			TNT1 A 0 A_JumpIfHealthLower(-20,1)
			goto Death
		Death.HLEgon:
		Death.FreemanGibs:
		XDeath:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)			
			TNT1 A 0 A_SpawnItem("HLHECUGibSpawner")
			TNT1 A 5 A_NoBlocking
			Stop	
		Death.CalebFire:
		Death.LifeLeech:
			TNT1 A 0 A_Jump(218, 2)
			TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
			TNT1 A 0 A_SpawnItemEx("BloodBurningCorpse_Generic", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_SETMASTER)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_Stop
			TNT1 A 5 A_NoBlocking
			TNT1 A -1 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
			Stop
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

Actor HLHECUGrenade {
    Radius 8
    Height 8
    Speed 7.5
    Damage (4 * random(2, 5))
    PROJECTILE
	Species "HLEnemies"
    Tag "Mk 2 Grenade"
	+DONTHARMCLASS
	+DONTHARMSPECIES
	-NOGRAVITY
    +EXTREMEDEATH
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	+BOUNCEONCEILINGS
	Scale 0.75
	BounceCount 3
	BounceSound "HECU/Grenade/Bounce"
	WallBounceSound "HECU/Grenade/Bounce"	
	Gravity 0.234	
    States {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,Random(20,15)-Random((Random(10,5)),0),0,1)
		TNT1 A 0 A_Jump(128,"SpawnLoop2")
	SpawnLoop1:	
      	HL23 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright 
      	HL24 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright 
      	HL25 ABCDEFGHI 2 Bright		
        Loop
	SpawnLoop2:	
      	HL26 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright 
      	HL27 ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright 
      	HL28 ABCDEFGHI 2 Bright		
        Loop	
    Death:
	XDeath:
		TNT1 A 0 A_PlaySound("HECU/Grenade/Explode")
		TNT1 A 0 A_Explode(24,106)
		TNT1 A 5 A_SpawnItemEx("HLExplosionBoom_Enemy",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
        Stop
    }
}

Actor HLHECUGrenade_Ground {
	Health 1
    Radius 5
    Height 5
    Speed 0
    Damage (0)
	Species "HLEnemies"
    Tag "Mk 2 Grenade"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+SHOOTABLE
	+SOLID
    +EXTREMEDEATH
	+MOVEWITHSECTOR
	-COUNTKILL
	+NOBLOOD
	Scale 0.75
    States {
    Spawn:
      	HL27 J 20 Bright 
		TNT1 A 0 A_Jump(34,"Death")
      	HL27 J 20 Bright 
		TNT1 A 0 A_Jump(51,"Death")		
      	HL27 J 20 Bright 		
		TNT1 A 0 A_Jump(96,"Death")		
      	HL27 J 20 Bright 		
		TNT1 A 0 A_Jump(112,"Death")		
      	HL27 J 20 Bright 				
    Death:
		TNT1 A 0 A_PlaySound("HECU/Grenade/Explode")
		TNT1 A 0 A_Explode(24,106)
		TNT1 A 5 A_SpawnItemEx("HLExplosionBoom_Enemy",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
        Stop
    }
}

actor HECU_Grunt1_Shrink : HECU_Grunt1
{
	+FRIGHTENED
	+NOTRIGGER
	-SHOOTABLE
	+THRUACTORS
	+NORADIUSDMG
	+VULNERABLE
	+QUICKTORETALIATE
	+COUNTKILL
	-NOGRAVITY
	+NODAMAGE
	+NOPAIN
	MaxStepHeight 0
	MaxDropOffHeight 0
	MeleeRange 16
	Height 16
	Health 1
	Speed 1
	PainChance "ShrinkDMG", 0
	DamageFactor "ShrinkDMG", 0.0
	PainChance "ExpanderDMG", 0
	DamageFactor "ExpanderDMG", 0.0
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_JumpIfInventory("ShrunkToken",1,"SpawnLoop")
			TNT1 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			TNT1 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			TNT1 A 0 A_SetScale(scalex*0.2,scaley*0.2) // setting the scale in ACS does work, but the actor shows up at normal size for a split second
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_Shrinker", 0, 1)
			HL18 A 10
			Goto See
		SpawnLoop:
			HL00 ABCDEFGHIJKLMNO 4 A_Look
			Loop
		See:
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 A 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 B 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 E 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 F 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 G 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 H 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL01 I 2 A_Chase("","")
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop
		Forget:
			"####" "#" 0 A_ClearTarget
			Goto See
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
		Squish:
			"####" "#" 0 A_GiveInventory("SquishToken", 1)
			"####" "#" 0 A_JumpIfInTargetInventory("DukeStomp", 1, 2)
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 2 
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 0 
			"####" "#" 2 A_Die("Squish")
			"####" "#" 0
			loop
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			stop
		DukeStomp:
			"####" "#" 0 A_GiveToTarget("DukeStomp", 1)
			Goto Squish
	}
}

actor HECU_Grunt1_ShrinkEffect : HECU_Grunt1
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			HL18 A 0
			HL18 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			HL18 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}

Actor HECU_Grunt2 : HECU_Grunt1 
{
	States
	{
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Grunt2_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt2", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_Grunt2_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_Shotgun1 : HECU_Grunt1
{
	DropItem "HL_HECU_ShotgunDrop", 256, 1
	States
	{
		Missile:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_Shotgun_DummyReload",8,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_Shotgun_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/shotgun_shoot")
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMuzzleFlash_Enemy",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 4
			Goto Retaliate	
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_Shotgun_DummyReload",8)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto See
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Shotgun1_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun1", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_Shotgun1_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_Shotgun2 : HECU_Shotgun1 
{
	States
	{
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Shotgun2_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Shotgun2", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_Shotgun2_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_M203 : HECU_Grunt1
{	
	States
	{
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("HECU/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto See
		ReloadGrenade:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_Playsound("HECU/LoadTalk", CHAN_VOICE)
			TNT1 A 0 A_TakeInventory("HECU_M203_DummyReload",1)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto ThrowGrenade	
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_M203_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_M203", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_M203_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_Commander1 : HECU_Grunt1
{
	Health 70
	States
	{
		Spawn:
			HL00 A 0
			HL00 A 1 A_JumpIfInventory("AlreadySpawned",1,"SpawnStandard")
			HL00 A 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
			HL00 A 0 ACS_NamedExecuteAlways("HalfLifeFootStepGeneratorEnemy")
			HL00 A 0 A_GiveInventory("HLSpeedTokens",8)
			HL00 A 0 A_GiveInventory("AlreadySpawned",1)
		SpawnStandard:
			TNT1 A 0
			TNT1 A 0 A_Jump(128,"Spawn2")
		Spawn1:	 
			TNT1 A 0 A_Jump(248,6)
			TNT1 A 0 A_Jump(112,4)
			TNT1 A 0 A_Playsound("HECU/Question", CHAN_VOICE)
			TNT1 A 0 A_RadiusGive("HECUCommanderQuestion", 512, RGF_MONSTERS, 1)
			TNT1 A 0 A_Jump(256,3)
			TNT1 A 0 A_Jump(220,2)
			TNT1 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			TNT1 A 0			
			HL00 ABCDEFGHIJKLMNO 4 A_Look
			Loop
		Spawn2:
			TNT1 A 0 A_Jump(248,6)
			TNT1 A 0 A_Jump(112,4)
			TNT1 A 0 A_Playsound("HECU/Question", CHAN_VOICE)
			TNT1 A 0 A_RadiusGive("HECUCommanderQuestion", 512, RGF_MONSTERS, 1)
			TNT1 A 0 A_Jump(256,3)
			TNT1 A 0 A_Jump(220,2)
			TNT1 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			TNT1 A 0			
			HL14 ABCDEFGHIJKLMNOPQR 4 A_Look		
			Loop
		See:
		    TNT1 A 0 A_JumpIfInventory("SawPlayer", 1, "SeeLoop")	   
		    TNT1 A 0 A_GiveInventory("SawPlayer", 1)
			TNT1 A 0 A_Jump(90,1)
			TNT1 A 0 A_JumpIfTargetInLos("Flank", 90, JLOSF_DEADNOJUMP)
			HL29 ABCDEFGHIJK 2 A_FaceTarget
			Goto SeeLoop
		SetSee:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeLoop
		LimpRun:
			TNT1 A 0 A_Jump(4, "Retreat")
			TNT1 A 0 A_Jump(180,3)
			TNT1 A 0 A_JumpIfTargetInLOS(2,90, JLOSF_DEADNOJUMP)
			TNT1 A 0 A_Playsound("HECU/Charge", CHAN_VOICE)
			TNT1 A 0
			HL16 ABCDEFGHI 2 A_Chase
			Loop
		LimpRun2:
			HL16 ABCDEFGHI 2 A_Chase
			Loop
		Retreat:
			HL31 ABCDEFGHIJKLMNOP 2 A_FaceTarget
			TNT1 A 0 A_ChangeFlag("Frightened", 1)
			Goto LimpRun2
		Flank:
			HL30 ABCDEFGHIJKLMNOP 2 A_FaceTarget
			Goto SeeLoop
		SeeLoop:
			TNT1 A 0 A_JumpIfHealthLower(50,"LimpRun")
			TNT1 A 0 A_Jump(180,3)
			TNT1 A 0 A_JumpIfTargetInLOS(2,90, JLOSF_DEADNOJUMP)
			TNT1 A 0 A_Playsound("HECU/Charge", CHAN_VOICE)
			TNT1 A 0
			HL01 ABCDEFGHI 2 A_Chase
			Loop
		Missile:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/mp5_shoot")
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/mp5_shoot")
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/mp5_shoot")
			TNT1 A 0 A_CustomMissile("HLBullet_Enemy",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate
		KeepFiring:
			HL02 A 5
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1		
		Retaliate:
			TNT1 A 0
			Goto SeeLoop			
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_MP5_DummyReload",50)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeLoop
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("HECU/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto SeeLoop
		ReloadGrenade:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_Playsound("HECU/LoadTalk", CHAN_VOICE)
			TNT1 A 0 A_TakeInventory("HECU_M203_DummyReload",1)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto ThrowGrenade		
		Kick:	
			HL15 ABCD 4 A_FaceTarget
			HL15 E 3 A_CustomMeleeAttack(Random(1,10)*2,"","")
			HL15 FGHIJK 2
			Goto SeeLoop
		RunAway:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,1)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			TNT1 A 0 A_Jump(24,"SetCover")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			TNT1 A 0 A_Jump(12,"SetSee")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)			
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeLoop	
		SetSee:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeLoop
		Cover:
			TNT1 A 0 A_Playsound("HECU/Grenade", CHAN_VOICE)
			HL21 ABCDEFGHIJKLMNOPQRSTU 2
			Goto SeeLoop
		Pain:
			TNT1 A 0 A_Pain
			HL18 ABCDEF 3
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto SeeLoop
		Pain.MightyBoot:
			HL18 A 0 A_Stop
			HL18 A 0 A_GiveInventory("NothingSpeed")
			HL18 A 0 A_PlaySoundEx("marathon/tech50/stun","body",0,0)
			HL18 A 5 A_FaceTarget
			HL18 A 0 A_Gravity
			HL18 A 30 A_Pain
			HL18 A 70
			HL18 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto SeeLoop
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Commander1_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander1", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_Commander1_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_Commander2 : HECU_Commander1
{
	DropItem "AssaultShotgunDrop", 32, 1
	States
	{
		Missile:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_Jump(180,"StartFiring")
//			TNT1 A 0 A_JumpIfCloser(128,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_Shotgun_DummyReload",8,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_Shotgun_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/shotgun_shoot")
			TNT1 A 0 A_CustomBulletAttack(6.0,6.0,6,random(1,4),"HLBulletPuff",0,CBAF_NORANDOM)
			TNT1 A 0 A_SpawnItemEx("HLMuzzleFlash_Enemy",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 4
			Goto Retaliate		
		Retaliate:
			TNT1 A 0
			Goto SeeLoop	
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_Shotgun_DummyReload",8)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeLoop
		ThrowGrenade:
			TNT1 A 0 A_Playsound("HECU/Throw", CHAN_VOICE)
			HL13 ABCDEFGHIJKLM 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("HLHECUGrenade", 32)
			HL13 NOPQRS 2
			TNT1 A 0 A_Jump(100,"RunAway")
			TNT1 A 0 A_JumpIfCloser(464,"Cover")
			TNT1 A 0 A_Jump(164,"RunAway")			
			TNT1 A 0 A_JumpIfCloser(729,"Cover")			
			Goto SeeLoop
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Commander2_Shrink : HECU_Grunt1_Shrink
{
	States
	{
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Commander2", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
	}
}

actor HECU_Commander2_ShrinkEffect : HECU_Grunt1_ShrinkEffect {}

Actor HECU_Sarge : HECU_Commander1
{
	Health 80
	Seesound "Sarge/Alert"
	Speed 2
	Mass 180
	DropItem "HL_HECU_SawDrop", 96, 1
	Scale 0.85
	States
	{
		Spawn:
			HL05 A 0
			HL05 A 1 A_JumpIfInventory("AlreadySpawned",1,"SpawnStandard")
			HL05 A 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
			HL00 A 0 ACS_NamedExecuteAlways("HalfLifeFootStepGeneratorEnemy")
			HL00 A 0 A_GiveInventory("HLSpeedTokens",2)
			HL05 A 0 A_GiveInventory("AlreadySpawned",1)
		SpawnStandard:
			HL05 A 0
			HL05 A 0 A_Jump(128,"Spawn2")
			Goto Spawn1
		Spawn1:	
			HL05 A 0 A_Jump(248,5)
			HL05 A 0 A_Jump(112,3)		
			HL05 A 0 A_Playsound("HECU/Question", CHAN_VOICE)
			HL05 A 0 A_Jump(256,3)
			HL05 A 0 A_Jump(220,2)
			HL05 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			HL05 ABCDEFGHIJKLMNOPQRSTUVWXYZ 4 A_Look
			HL06 ABCDEFGHIJKLMNOPQRSTUVW 4 A_Look
			HL06 A 0
			Loop
		Spawn2:
			HL07 A 0 A_Jump(248,5)
			HL07 A 0 A_Jump(112,3)
			HL07 A 0 A_Playsound("HECU/Question", CHAN_VOICE)
			HL07 A 0 A_Jump(256,3)
			HL07 A 0 A_Jump(220,2)
			HL07 A 0 A_Playsound("HECU/Idle", CHAN_VOICE)
			HL07 ABCDEFGHIJKLMNOPQRSTUVWXYZ 4 A_Look	
			HL08 ABCDEFGHIJKLMNOPQRST 4 A_Look
			HL07 A 0
			Loop
		See:
			HL11 A 1
			HL11 A 0 A_StopSound(CHAN_WEAPON)
			HL11 A 0 A_StopSound(CHAN_BODY)
			HL11 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			Goto SeeLoop
		SeeLoop:
			HL11 AB 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL11 CD 2 A_Chase
			HL11 EF 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL11 GH 2 A_Chase
			HL11 IJ 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL11 KL 2 A_Chase
			HL11 MN 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL11 OP 2 A_Chase
			HL11 QR 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL11 ST 2 A_Chase
			Loop
		Idle:
			HL22 A 1
			HL22 A 0 A_StopSound(CHAN_WEAPON)
			HL22 A 0 A_StopSound(CHAN_BODY)
			HL22 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			Goto IdleLoop
		IdleLoop:
			HL11 AB 4 A_Wander		HL11 C 0 A_Look
			HL11 CD 4 A_Wander		HL11 E 0 A_Look			
			HL11 EF 4 A_Wander		HL11 G 0 A_Look			
			HL11 GH 4 A_Wander		HL11 I 0 A_Look			
			HL11 IJ 4 A_Wander		HL11 K 0 A_Look				
			HL11 KL 4 A_Wander		HL11 M 0 A_Look			
			HL11 MN 4 A_Wander		HL11 O 0 A_Look			
			HL11 OP 4 A_Wander		HL11 Q 0 A_Look			
			HL11 QR 4 A_Wander		HL11 S 0 A_Look			
			HL11 ST 4 A_Wander		HL11 A 0 A_Look		
			Loop
		Melee:
		Missile:
		StartFiring:
			TNT1 A 0 A_ChangeFlag("NOPAIN",0)
			TNT1 A 0 A_PlaySound("Sarge/Spinup",5)
			HL04 AABBCC 2 A_FaceTarget		
			HL04 D 0 A_PlaySound("Sarge/Fireloop",CHAN_WEAPON,1.0,TRUE)
			HL04 D 0 A_PlaySound("Sarge/Spin",CHAN_BODY,1.0,TRUE)
		FireLoop:	
			HL04 D 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 D 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,15,SXF_NOCHECKPOSITION)
			HL04 D 1 A_FaceTarget	
			HL04 E 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 E 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 E 1 A_FaceTarget	
			HL04 F 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 F 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,-15,SXF_NOCHECKPOSITION)
			HL04 F 1 A_FaceTarget	
			HL04 G 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 G 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 G 1 A_FaceTarget	
			HL04 H 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 H 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,15,SXF_NOCHECKPOSITION)
			HL04 H 1 A_FaceTarget	
			HL04 I 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 I 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 I 1 A_FaceTarget
			HL04 J 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 J 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,-15,SXF_NOCHECKPOSITION)
			HL04 J 1 A_FaceTarget
			HL04 K 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 K 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 K 1 A_FaceTarget
			HL04 L 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 L 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,15,SXF_NOCHECKPOSITION)
			HL04 L 1 A_FaceTarget
			HL04 M 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 M 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 M 1 A_FaceTarget
			HL04 N 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 N 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,-15,SXF_NOCHECKPOSITION)
			HL04 N 1 A_FaceTarget
			HL04 O 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 O 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 O 1 A_FaceTarget
			HL04 P 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 P 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,15,SXF_NOCHECKPOSITION)
			HL04 P 1 A_FaceTarget
			HL04 Q 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 Q 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 Q 1 A_FaceTarget
			HL04 R 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 R 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,-15,SXF_NOCHECKPOSITION)
			HL04 R 1 A_FaceTarget
			HL04 S 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 S 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 S 1 A_FaceTarget
			HL04 T 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 T 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,15,SXF_NOCHECKPOSITION)
			HL04 T 1 A_FaceTarget
			HL04 U 0 A_CustomMissile("HLBullet_Enemy",28,4,angle+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL04 U 0 A_SpawnItemEx("HLMGMuzzleFlash_Sarge",44,8,28,0,0,0,0,SXF_NOCHECKPOSITION)
			HL04 U 1 A_FaceTarget
			HL04 D 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate
		KeepFiring:
			TNT1 A 0 A_CPosRefire
			Goto FireLoop
		Retaliate:
			TNT1 A 0 A_StopSound(CHAN_WEAPON)
			TNT1 A 0 A_StopSound(CHAN_BODY)
			TNT1 A 0 A_PlaySound("Sarge/SpinDown",CHAN_WEAPON)			
			Goto See
		Pain:
			HL09 A 0 A_StopSound(CHAN_WEAPON)
			HL09 A 0 A_StopSound(CHAN_BODY)
			HL09 A 0 A_Jump(128,"Pain2")
			HL09 A 0 A_Pain
			HL09 ABCDEFGHIJKLMNOP 3
			TNT1 A 0
			Goto See
		Pain2:
			HL10 A 0 A_Pain
			HL10 ABCDEFGHIJKLMNOP 3
			TNT1 A 0
			Goto See
		Pain.MightyBoot:
			TNT1 A 0 A_StopSound(CHAN_WEAPON)
			TNT1 A 0 A_StopSound(CHAN_BODY)
			TNT1 A 0 A_ChangeFlag("NOPAIN",1)
			TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
			TNT1 A 0 A_Jump(128,"BootPain2")
			HL09 A 3 A_FaceTarget
			TNT1 A 0 A_Recoil(14)
			HL09 B 3 A_Pain
			HL09 CDEFGHIJKLMNOP 3
			TNT1 A 0
			Goto See
		BootPain2:
			HL10 A 3 A_FaceTarget
			TNT1 A 0 A_Recoil(14)
			HL10 B 3 A_Pain
			HL10 CDEFGHIJKLMNOP 3
			TNT1 A 0
			Goto See
		Death:
			TNT1 A 0 A_StopSound(CHAN_WEAPON)
			TNT1 A 0 A_StopSound(CHAN_BODY)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)						
			TNT1 A 0 A_Jump(128,"Death2","Death3")
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL00 ABCDEFGHIJKLMNO 4
			HL00 P -1
			Stop	
		Death2:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL01 ABCDEFGHIJKLM 4
			HL01 N -1
			Stop	
		Death3:
			HL02 A 0 A_NoBlocking
			HL02 A 0 A_Scream
			HL02 ABCDEFG 4
			HL02 H 0 A_PlaySound("Sarge/Fireloop",CHAN_WEAPON,1.0,TRUE)
			HL02 H 0 A_PlaySound("Sarge/Spin",CHAN_BODY,1.0,TRUE)
			HL02 H 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 H 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 H 4
			HL02 I 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 I 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 I 4
			HL02 J 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 J 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 J 4
			HL02 K 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 K 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 K 4
			HL02 L 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 L 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 L 4
			HL02 M 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 M 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 M 4
			HL02 N 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 N 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 N 4
			HL02 O 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 O 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 O 4
			HL02 P 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 P 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 P 4
			HL02 Q 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 Q 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 Q 4
			HL02 R 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 R 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 R 4
			HL02 S 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 S 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 S 4
			HL02 T 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 T 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 T 4
			HL02 U 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 U 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 U 4
			HL02 V 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 V 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 V 4
			HL02 W 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 W 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 W 4
			HL02 X 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 X 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 X 4
			HL02 Y 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 Y 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 Y 4
			HL02 Z 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL02 Z 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 Z 4
			HL03 A 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 A 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 A 4
			HL03 B 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 B 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 B 4
			HL03 C 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 C 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 C 4
			HL03 D 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 D 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 D 4
			HL03 E 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 E 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 E 1
			HL03 F 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 F 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 F 4
			HL03 G 0 A_CustomMissile("HLBullet_Enemy",4,-52,angle-90+frandom(-15.0,15.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-15.0,15.0))
			HL03 G 0 A_SpawnItemEx("HLMGMuzzleFlash",-20,52,4,0,0,0,0,SXF_NOCHECKPOSITION)
			HL03 G 4
			HL03 H 4
			HL03 I 0 A_StopSound(CHAN_WEAPON)
			HL03 I 0 A_PlaySound("Sarge/SpinDown",CHAN_WEAPON)
			HL03 I 0 A_StopSound(CHAN_BODY)
			HL03 I -1
			Stop
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:	
			TNT1 A 0 A_JumpIfHealthLower(-20,1)
			goto Death
		Death.HLEgon:
		Death.FreemanGibs:
		XDeath:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)			
			TNT1 A 0 A_SpawnItem("HLHECUGibSpawner")
			TNT1 A 5 A_NoBlocking
			Stop	
		Death.CalebFire:
		Death.LifeLeech:
			TNT1 A 0 A_Jump(218, 2)
			TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
			TNT1 A 0 A_SpawnItemEx("BloodBurningCorpse_Generic", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_SETMASTER)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_Stop
			TNT1 A 5 A_NoBlocking
			TNT1 A -1 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
			Stop
		Pain.ShrinkerDMG:
			HL09 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
	}
}

actor HECU_Sarge_Shrink : HECU_Sarge
{
	+FRIGHTENED
	+NOTRIGGER
	-SHOOTABLE
	+THRUACTORS
	+NORADIUSDMG
	+VULNERABLE
	+QUICKTORETALIATE
	+COUNTKILL
	-NOGRAVITY
	+NODAMAGE
	+NOPAIN
	MaxStepHeight 0
	MaxDropOffHeight 0
	MeleeRange 16
	Height 16
	Health 1
	Speed 1
	PainChance "ShrinkDMG", 0
	DamageFactor "ShrinkDMG", 0.0
	PainChance "ExpanderDMG", 0
	DamageFactor "ExpanderDMG", 0.0
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_JumpIfInventory("ShrunkToken",1,"SpawnLoop")
			TNT1 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			TNT1 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			TNT1 A 0 A_SetScale(scalex*0.2,scaley*0.2) // setting the scale in ACS does work, but the actor shows up at normal size for a split second
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_Shrinker", 0, 1)
			HL09 A 10
			Goto See
		SpawnLoop:
			HL05 ABCDEFGHIJKLMNOPQRSTUVWXYZ 4 A_Look
			HL06 ABCDEFGHIJKLMNOPQRSTUVW 4 A_Look
			Loop
		See:
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 A 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 B 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 E 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 F 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 G 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 H 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 I 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 J 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 K 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 L 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 M 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 N 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 O 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 P 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 A 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 B 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 Q 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 R 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 S 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HL11 T 2 A_Chase("","",CHF_NOPLAYACTIVE)
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop
		Forget:
			"####" "#" 0 A_ClearTarget
			Goto See
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Sarge", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
		Squish:
			"####" "#" 0 A_GiveInventory("SquishToken", 1)
			"####" "#" 0 A_JumpIfInTargetInventory("DukeStomp", 1, 2)
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 2 
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 0 
			"####" "#" 2 A_Die("Squish")
			"####" "#" 0
			loop
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			stop
		DukeStomp:
			"####" "#" 0 A_GiveToTarget("DukeStomp", 1)
			Goto Squish
	}
}

actor HECU_Sarge_ShrinkEffect : HECU_Sarge
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			HL09 A 0
			HL09 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			HL09 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}

Actor HLMGMuzzleFlash : HLMuzzleFlash_Enemy
{
	States
	{
		Spawn:
			TNT1 A 0
			HW29 L 1 Bright
			HW29 M 1 Bright
			Stop
	}
}

Actor HLMGMuzzleFlash_Sarge : HLMuzzleFlash_Enemy
{
	States
	{
		Spawn:
			TNT1 A 0
			HW29 LM 1 Bright
			Stop
	}
}

Actor HLHECUM203Grenade : HLMP5Grenade 
{ 
	Species "HLEnemies"
	+DONTHARMCLASS
	+DONTHARMSPECIES
	States
	{
		Death:
		TNT1 A 0 A_NoGravity
		TNT1 A 0 A_Explode(random(15,45)+Random(0,15),124)
		TNT1 A 0 A_PlaySound("halflife/mp5_grenadehit",CHAN_BODY)
		TNT1 A 5 A_SpawnItemEx("HLExplosionBoom",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		stop
	}
}

Actor HECU_Grunt : RandomSpawner
{
	DropItem "HECU_Grunt1", 255, 4
	DropItem "HECU_Grunt2", 255, 4
	DropItem "HECU_Shotgun1", 255, 3
	DropItem "HECU_Shotgun2", 255, 3
	DropItem "HECU_M203", 255, 2
	DropItem "HECU_Commander1", 255, 1
	DropItem "HECU_Commander2", 255, 1
}

Actor HLBullet_Enemy : HLBullet
{
	Damage (5)
}

actor HECUCommanderQuestion : Inventory
{
	Inventory.Maxamount 1
}