Actor Hexen2Mummy : Hexen2HumanoidBase
{
	Tag "Thysis Mummy"
	Radius 19
	Height 56
	Health 300
	Speed 3
	PainChance 256
	GibHealth 100
	SeeSound "Hexen2/Mummy/Sight"
	ActiveSound "Hexen2/Mummy/Moan"
	PainSound "Hexen2/Mummy/Pain"
	DeathSound "Hexen2/Mummy/Die"
	PainChance "ShrinkerDMG", 0
	States
	{
	Spawn:
		HX05 A 0
		HX05 A 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		HX05 A 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		HX05 A 0 A_GiveInventory("AlreadySpawned",1)
		HX05 A 0 A_TakeInventory("Hexen2MummyOneArmGone", 1)	
		HX05 A 0 A_TakeInventory("Hexen2MummyBothArmsGone", 1)
		HX05 A 0 A_TakeInventory("Hexen2MummyLegGone", 1)		
		HX05 A 0 A_GiveInventory("Hexen2MummyWhole", 1)
	Spawn2:	
		HX05 A 2 A_Look		
		Loop
	See:
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyLegGone", 1, "See.Crawl")
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyBothArmsGone", 1, "See.BothArmsGone")	
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "See.OneArmGone")		
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "See.Whole")
		Goto See.Whole
	See.Whole:	
		HX05 AB 2 A_Chase ("Melee.Whole","Missile.Whole")
		HX05 CD 2 A_Chase ("Melee.Whole","Missile.Whole")
		HX05 E 2 A_Chase ("Melee.Whole","Missile.Whole") HX05 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX05 F 2 A_Chase ("Melee.Whole","Missile.Whole") HX05 G 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX05 GH 2 A_Chase ("Melee.Whole","Missile.Whole")
		HX05 IJ 2 A_Chase ("Melee.Whole","Missile.Whole")
		HX05 KL 2 A_Chase ("Melee.Whole","Missile.Whole")
		HX05 M 2 A_Chase ("Melee.Whole","Missile.Whole")
		Loop
	See.OneArmGone:
		HX06 AB 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 CD 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 E 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone") HX06 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX06 F 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 G 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone") HX06 H 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX06 H 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 IJ 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 KL 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 MN 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		HX06 OP 2 A_Chase ("Melee.OneArmGone","Missile.OneArmGone")
		Loop
	See.BothArmsGone:
		HX07 AB 2 A_Chase ("Melee.BothArmsGone","")
		HX07 CD 2 A_Chase ("Melee.BothArmsGone","")
		HX07 E 2 A_Chase ("Melee.BothArmsGone","") HX07 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX07 F 2 A_Chase ("Melee.BothArmsGone","") 
		HX07 G 2 A_Chase ("Melee.BothArmsGone","") HX07 H 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX07 H 2 A_Chase ("Melee.BothArmsGone","")
		HX07 IJ 2 A_Chase ("Melee.BothArmsGone","")
		HX07 KL 2 A_Chase ("Melee.BothArmsGone","")
		HX07 MN 2 A_Chase ("Melee.BothArmsGone","")
		HX07 OP 2 A_Chase ("Melee.BothArmsGone","")
		HX07 Q 2 A_Chase ("Melee.BothArmsGone","")
		Loop
	See.Crawl:
		HX12 A 0 A_Stop
		HX12 A 4 A_Chase ("Melee.Crawl","") HX12 B 0 A_Stop
		HX12 B 4 A_Chase ("Melee.Crawl","") HX12 B 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX12 CD 4 A_Chase ("Melee.Crawl","")
		HX12 E 4 A_Chase ("Melee.Crawl","") HX12 F 0 A_Stop
		HX12 F 4 A_Chase ("Melee.Crawl","") HX12 G 0 A_Stop
		HX12 G 4 A_Chase ("Melee.Crawl","") HX12 H 0 A_Stop
		HX12 H 4 A_Chase ("Melee.Crawl","") HX12 I 0 A_Stop
		HX12 I 4 A_Chase ("Melee.Crawl","") HX12 J 0 A_Stop
		HX12 K 4 A_Chase ("Melee.Crawl","") HX12 L 0 A_Stop
		HX12 L 4 A_Chase ("Melee.Crawl","") HX12 M 0 A_Stop
		HX12 M 4 A_Chase ("Melee.Crawl","")
		Loop
	Melee:
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyLegGone", 1, "Melee.Crawl")
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyBothArmsGone", 1, "Melee.BothArmsGone")	
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "Melee.OneArmGone")		
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "Melee.Whole")
		Goto Melee.Whole	
	Melee.Whole:
		HX03 A 2 A_FaceTarget
		HX03 B 2 A_FaceTarget
		HX03 C 2 A_FaceTarget
		HX03 D 2 A_FaceTarget
		HX03 E 2 A_FaceTarget
		HX03 F 2 A_FaceTarget
		HX03 G 2 A_FaceTarget HX03 H 0 A_PlaySound("Hexen2/VorpalSwing", CHAN_WEAPON)
		HX03 H 2 A_FaceTarget 
		HX03 I 2 A_FaceTarget
		HX03 J 2 A_FaceTarget
		HX03 K 2 A_CustomMeleeAttack(8,"Hexen2/Slash", none, "Hexen2Damage")
		HX03 L 2 A_FaceTarget
		HX03 M 2 A_FaceTarget
		HX03 N 2 A_FaceTarget
		HX03 O 2 A_FaceTarget
		HX03 P 2 A_FaceTarget
		HX03 Q 2 A_FaceTarget
		HX03 R 2 A_FaceTarget
		Goto See
	Melee.OneArmGone:
		HX04 A 2 A_FaceTarget
		HX04 B 2 A_FaceTarget
		HX04 C 2 A_FaceTarget
		HX04 D 2 A_FaceTarget
		HX04 E 2 A_FaceTarget
		HX04 F 2 A_FaceTarget
		HX04 G 2 A_FaceTarget HX04 H 0 A_PlaySound("Hexen2/VorpalSwing", CHAN_WEAPON)
		HX04 H 2 A_FaceTarget
		HX04 I 2 A_FaceTarget
		HX04 J 2 A_FaceTarget
		HX04 K 2 A_CustomMeleeAttack(8,"Hexen2/Slash", none, "Hexen2Damage")
		HX04 L 2 A_FaceTarget
		HX04 M 2 A_FaceTarget
		HX04 N 2 A_FaceTarget
		HX04 O 2 A_FaceTarget
		HX04 P 2 A_FaceTarget
		HX04 Q 2 A_FaceTarget
		HX04 R 2 A_FaceTarget
		Goto See	
	Melee.BothArmsGone:
		HX02 A 2 A_FaceTarget
		HX02 B 2 A_FaceTarget
		HX02 C 2 A_FaceTarget
		HX02 D 2 A_FaceTarget HX02 E 0 A_PlaySound("Hexen2/Gaunt1", CHAN_WEAPON)
		HX02 E 2 A_FaceTarget
		HX02 F 2 A_FaceTarget
		HX02 G 2 A_FaceTarget
		HX02 H 2 A_CustomMeleeAttack(8,"Hexen2/Slash", none, "Hexen2Damage")
		HX02 I 2 A_FaceTarget
		Goto See
	Melee.Crawl:
		HX12 A 4 A_FaceTarget
		HX12 B 4 A_FaceTarget
		HX12 CD 4 A_FaceTarget
		HX12 E 4 A_FaceTarget
		HX12 F 4 A_FaceTarget
		HX12 G 4 A_CustomMeleeAttack(Random(0,1)*8,"Hexen2/Mummy/Bite", none, "Hexen2Damage")
		HX12 H 4 A_FaceTarget
		HX12 I 4 A_FaceTarget
		HX12 K 4 A_FaceTarget
		HX12 L 4 A_FaceTarget
		HX12 M 4 A_PlaySound("Hexen2/Mummy/Crawl", CHAN_BODY)
		Goto See	
	Pain:
//		"####" "#" 0 A_ChangeFlag(NOPAIN, True)
		"####" "#" 2 A_Pain
		"####" "#" 0 A_JumpIfHealthLower(30, 10)
		"####" "#" 0 A_JumpIfHealthLower(60, 5)		
		"####" "#" 0 A_JumpIfHealthLower(100, 1)
		Goto See
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "ThrowLeftArm")
		"####" "#" 2 A_Pain
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)
		Goto See
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "ThrowRightArm")
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "ThrowLeftArm")
		"####" "#" 2 A_Pain
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)
		Goto See
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyBothArmsGone", 1, "ThrowLeftLeg")
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "ThrowRightArm")		
		"####" "#" 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "ThrowLeftArm")		
		"####" "#" 2 A_Pain
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)
		Goto See
	ThrowLeftArm:
		"####" "#" 0 A_GiveInventory("Hexen2MummyOneArmGone", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyWhole", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyBothArmsGone", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyLegGone", 1)
		"####" "#" 0 A_PlaySound("Hexen2/Mummy/LimbLoss", CHAN_BODY)
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyArm", 0, -10, 40, 0,0,0)
		HX06 A 2 A_Pain
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)
		Goto See.OneArmGone
	ThrowRightArm:
		"####" "#" 0 A_TakeInventory("Hexen2MummyOneArmGone", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyWhole", 1)
		"####" "#" 0 A_GiveInventory("Hexen2MummyBothArmsGone", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyLegGone", 1)
		"####" "#" 0 A_PlaySound("Hexen2/Mummy/LimbLoss", CHAN_BODY)
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyArm", 0, 10, 40, 0,0,0,0, SXF_NOCHECKPOSITION)
		HX07 A 2 A_Pain
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)
		Goto See.BothArmsGone
	ThrowLeftLeg:
		"####" "#" 0 A_TakeInventory("Hexen2MummyOneArmGone", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyWhole", 1)
		"####" "#" 0 A_TakeInventory("Hexen2MummyBothArmsGone", 1)
		"####" "#" 0 A_GiveInventory("Hexen2MummyLegGone", 1)
		"####" "#" 0 A_PlaySound("Hexen2/Mummy/LimbLoss", CHAN_BODY)
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLeg", 0, 10, 20, 0,0,0,0, SXF_NOCHECKPOSITION)	
		HX00 A 2 A_Pain
		HX00 BCDE 2
		HX00 FGHI 2
		HX00 JKLM 2
		"####" "#" 0 A_ChangeFlag(NOPAIN, False)		
		Goto See.Crawl
	Missile:
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "Missile.OneArmGone")		
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "Missile.Whole")	
		Goto Missile.Whole
	Missile.Whole:
		HX08 A 0 A_JumpIfCloser(70, "See")
		HX08 A 2 A_FaceTarget
		HX08 B 2 A_FaceTarget
		HX08 C 2 A_FaceTarget
		HX08 D 2 A_FaceTarget
		HX08 E 2 A_FaceTarget
		HX08 F 0 A_Playsound("Hexen2/KnightArcher/ArrowGreen", CHAN_BODY)
		HX08 F 2 A_CustomMissile("Hexen2MummyProjectile", 25, -9, 0)
		HX08 G 2 A_FaceTarget
		HX08 H 2 A_FaceTarget
		HX08 I 2 A_FaceTarget
		HX08 J 2 A_FaceTarget
		HX08 K 2 A_FaceTarget
		HX08 K 0 A_JumpIfCloser(128, "MissileWholeChanceNear")
		HX08 K 0 A_JumpIfCloser(256, "MissileWholeChanceMid")
		HX08 K 0 A_JumpIfCloser(384, "MissileWholeChanceFar")
		HX08 L 2 A_FaceTarget
		HX08 M 2 A_FaceTarget
		HX08 N 2 A_FaceTarget
		HX08 O 2 A_FaceTarget
		HX08 P 2 A_FaceTarget
		Goto See
	MissileWholeChanceNear:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.80, 1)
		Goto Missile.Whole+16
		HX08 A 0 
		Goto Missile.Whole+6
	MissileWholeChanceMid:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.70, 1)
		Goto Missile.Whole+16
		HX08 A 0 
		Goto Missile.Whole+6
	MissileWholeChanceFar:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.40, 1)
		Goto Missile.Whole+16
		HX08 A 0 
		Goto Missile.Whole+6	
	Missile.OneArmGone:
		HX09 A 0 A_JumpIfCloser(70, "See")
		HX09 A 2 A_FaceTarget
		HX09 B 2 A_FaceTarget
		HX09 C 2 A_FaceTarget
		HX09 D 2 A_FaceTarget
		HX09 E 2 A_FaceTarget
		HX09 F 0 A_Playsound("Hexen2/KnightArcher/ArrowGreen", CHAN_BODY)
		HX09 F 2 A_CustomMissile("Hexen2MummyProjectile", 40, 11, 0)
		HX09 G 2 A_FaceTarget
		HX09 H 2 A_FaceTarget
		HX09 I 2 A_FaceTarget
		HX09 J 2 A_FaceTarget
		HX09 K 2 A_FaceTarget
		HX09 K 0 A_JumpIfCloser(128, "MissileOneArmChanceNear")
		HX09 K 0 A_JumpIfCloser(256, "MissileOneArmChanceMid")
		HX09 K 0 A_JumpIfCloser(384, "MissileOneArmChanceFar")
		HX09 L 2 A_FaceTarget
		HX09 M 2 A_FaceTarget
		HX09 N 2 A_FaceTarget
		HX09 O 2 A_FaceTarget
		HX09 P 2 A_FaceTarget
		Goto See
	MissileOneArmChanceNear:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.80, 1)
		Goto Missile.OneArmGone+16
		HX09 A 0 
		Goto Missile.OneArmGone+6
	MissileOneArmChanceMid:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.70, 1)
		Goto Missile.OneArmGone+16
		HX09 A 0 
		Goto Missile.OneArmGone+6
	MissileOneArmChanceFar:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.40, 1)
		Goto Missile.OneArmGone+16
		HX09 A 0 
		Goto Missile.OneArmGone+6	
	Death:
	XDeath:
		TNT1 A 0 A_Playsound("Hexen2/Gib", CHAN_5)
		TNT1 A 0 A_Scream
		TNT1 A 0 A_ChangeFlag("SOLID",false)
		TNT1 A 0 A_NoBlocking	
		TNT1 A 0 A_KillMaster
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
		TNT1 A 5 A_SpawnItemEx("Hexen2GibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_SpawnItemEx("Hexen2MummyHead",0,0,0,random(-5,5),random(-5,5),frandom(2,6),Random(1,360),SXF_TRANSFERSCALE)
		Stop	
	Pain.ShrinkerDMG:
		HX05 A 0
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
		"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
		"####" "#" 0 A_NoBlocking
		"####" "#" 0 A_PlaySound("duke/shrink")
		"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
		"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2Mummy_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
		TNT1 A 2
		TNT1 A 0 Thing_Remove(0)
		stop		
		}
}		

actor Hexen2Mummy_Shrink : Hexen2Mummy
{
	+FRIGHTENED
	+NOTRIGGER
	-SHOOTABLE
	+THRUACTORS
	+NORADIUSDMG
	+VULNERABLE
	+QUICKTORETALIATE
	+COUNTKILL
	-NOGRAVITY
	+NODAMAGE
	+NOPAIN
	MaxStepHeight 0
	MaxDropOffHeight 0
	MeleeRange 16
	Height 16
	Health 1
	Speed 1
	PainChance "ShrinkDMG", 0
	DamageFactor "ShrinkDMG", 0.0
	PainChance "ExpanderDMG", 0
	DamageFactor "ExpanderDMG", 0.0
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_JumpIfInventory("ShrunkToken",1,"SpawnLoop")
			TNT1 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			TNT1 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			TNT1 A 0 A_SetScale(scalex*0.2,scaley*0.2) // setting the scale in ACS does work, but the actor shows up at normal size for a split second
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_Shrinker", 0, 1)
			HX05 A 10
			Goto See
		SpawnLoop:
			HX05 A 10 A_Look
			Loop
		See:
			"####" "#" 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "See2")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 A 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 B 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 E 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 F 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 G 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 H 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 I 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 J 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 K 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 L 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 M 2 A_Chase("","")				
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop
		See2:
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 A 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 B 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 E 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 F 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 G 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 H 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 I 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 J 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 K 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 L 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 M 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 N 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 O 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 P 2 A_Chase("","")				
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop		
		Forget:
			"####" "#" 0 A_ClearTarget
			Goto See
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Hexen2Mummy", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
		Squish:
			"####" "#" 0 A_GiveInventory("SquishToken", 1)
			"####" "#" 0 A_JumpIfInTargetInventory("DukeStomp", 1, 2)
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 2 
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 0 
			"####" "#" 2 A_Die("Squish")
			"####" "#" 0
			loop
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			stop
		DukeStomp:
			"####" "#" 0 A_GiveToTarget("DukeStomp", 1)
			Goto Squish
	}
}

actor Hexen2Mummy_ShrinkEffect : Hexen2Mummy
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			HX05 A 0
			HX05 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			HX05 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}


Actor Hexen2MummyWhole : Inventory { Inventory.MaxAmount 1 }
Actor Hexen2MummyOneArmGone : Inventory { Inventory.MaxAmount 1 }
Actor Hexen2MummyBothArmsGone : Inventory { Inventory.MaxAmount 1 }
Actor Hexen2MummyLegGone : Inventory { Inventory.MaxAmount 1 }
Actor Hexen2MummyHead : Hexen2HeadActor 
{
    Tag "Head of Thysis Mummy"
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_SetScale(scalex+frandom(0.0,0.1))
		SpawnLoop:
			HX00 A 0 A_SetAngle(angle+12)
			HX00 A 0 A_SetPitch(angle-12)
		    HX00 A 0 A_SpawnItemEx("Hexen2BloodPuffGenerator",random(-6,6),random(-6,6),random(-4,4),0,0,frandom(-8,8),0,SXF_NOCHECKPOSITION)
			TNT1 A 0 A_CheckFloor("FloorLoop")
			HX00 A 1
			Loop
		Death:
		XDeath:
			TNT1 A 0 A_TakeInventory("Hexen2CorpseTimer", 20)
			TNT1 A 0 A_Playsound("Hexen2/Gib", CHAN_5)
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
			TNT1 A 0 A_SpawnItemEx("Hexen2GibSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			Stop
		FloorLoop:
			HX00 A 0 A_SetAngle(0)
			HX00 A 0 A_SetPitch(0)
			HX00 AA 0 ACS_NamedExecuteAlways("Hexen2_CorpseRemove")
		DegenLoop:			
		    HX00 A 35
			Loop
			}
}
	
Actor Hexen2MummyLordHead : Hexen2MummyHead { Tag "Head of Thysis Mummy Lord" }
Actor Hexen2MummyArm : Hexen2MummyHead { -SHOOTABLE }
Actor Hexen2MummyLeg : Hexen2MummyArm { }

Actor Hexen2MummyProjectile : Hexen2ArcherGreenProjectile { Damage(Random(5,10)) }

Actor Hexen2MummyLord : Hexen2Mummy 
{
	Health 600
	Tag "Thysis Mummy Lord"
	SeeSound "Hexen2/MumLord/Sight"
	ActiveSound "Hexen2/MumLord/Moan"
	PainSound "Hexen2/MumLord/Pain"
	DeathSound "Hexen2/MumLord/Die"	
	States
	{
	See:
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyLegGone", 1, "See.Crawl")
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyBothArmsGone", 1, "See.BothArmsGone")	
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "See.OneArmGone")		
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "See.Whole")
		Goto See.Whole
	See.Whole:	
		HX05 AB 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		HX05 CD 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		HX05 E 2 A_Chase ("Melee.Whole","MumLordChoice.Whole") HX05 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX05 F 2 A_Chase ("Melee.Whole","MumLordChoice.Whole") HX05 G 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX05 GH 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		HX05 IJ 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		HX05 KL 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		HX05 M 2 A_Chase ("Melee.Whole","MumLordChoice.Whole")
		Loop
	See.OneArmGone:
		HX06 AB 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 CD 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 E 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone") HX06 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX06 F 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 G 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone") HX06 H 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX06 H 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 IJ 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 KL 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 MN 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		HX06 OP 2 A_Chase ("Melee.OneArmGone","MumLordChoice.OneArmGone")
		Loop
	See.BothArmsGone:
		HX07 AB 2 A_Chase ("Melee.BothArmsGone","")
		HX07 CD 2 A_Chase ("Melee.BothArmsGone","")
		HX07 E 2 A_Chase ("Melee.BothArmsGone","") HX07 F 0 A_PlaySound("Hexen2/Mummy/Step", CHAN_BODY)
		HX07 F 2 A_Chase ("Melee.BothArmsGone","") 
		HX07 G 2 A_Chase ("Melee.BothArmsGone","") HX07 H 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX07 H 2 A_Chase ("Melee.BothArmsGone","")
		HX07 IJ 2 A_Chase ("Melee.BothArmsGone","")
		HX07 KL 2 A_Chase ("Melee.BothArmsGone","")
		HX07 MN 2 A_Chase ("Melee.BothArmsGone","")
		HX07 OP 2 A_Chase ("Melee.BothArmsGone","")
		HX07 Q 2 A_Chase ("Melee.BothArmsGone","")
		Loop
	See.Crawl:
		HX12 A 0 A_Stop
		HX12 A 4 A_Chase ("Melee.Crawl","") HX12 B 0 A_Stop
		HX12 B 4 A_Chase ("Melee.Crawl","") HX12 B 0 A_PlaySound("Hexen2/Mummy/Slide", CHAN_BODY)
		HX12 CD 4 A_Chase ("Melee.Crawl","")
		HX12 E 4 A_Chase ("Melee.Crawl","") HX12 F 0 A_Stop
		HX12 F 4 A_Chase ("Melee.Crawl","") HX12 G 0 A_Stop
		HX12 G 4 A_Chase ("Melee.Crawl","") HX12 H 0 A_Stop
		HX12 H 4 A_Chase ("Melee.Crawl","") HX12 I 0 A_Stop
		HX12 I 4 A_Chase ("Melee.Crawl","") HX12 J 0 A_Stop
		HX12 K 4 A_Chase ("Melee.Crawl","") HX12 L 0 A_Stop
		HX12 L 4 A_Chase ("Melee.Crawl","") HX12 M 0 A_Stop
		HX12 M 4 A_Chase ("Melee.Crawl","")
		Loop	
	Missile:
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "MumLordChoice.OneArmGone")		
		TNT1 A 0 A_JumpIfInventory("Hexen2MummyWhole", 1, "MumLordChoice.Whole")	
		Goto MumLordChoice.Whole
	MumLordChoice.Whole:
		"####" "#" 0 A_JumpIfCloser(128, "Missile2WholeChanceNear")
		"####" "#" 0 A_JumpIfCloser(256, "Missile2WholeChanceMid")
		"####" "#" 0 A_JumpIfCloser(386, "Missile2WholeChanceFar")
		Goto Missile2WholeChanceFar
	MumLordChoice.OneArmGone:
		"####" "#" 0 A_JumpIfCloser(128, "Missile2OneArmChanceNear")
		"####" "#" 0 A_JumpIfCloser(256, "Missile2OneArmChanceMid")
		"####" "#" 0 A_JumpIfCloser(386, "Missile2OneArmChanceFar")
		Goto Missile2OneArmChanceFar	
	Missile2WholeChanceNear:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.60, "Missile2.Whole")
		Goto Missile.Whole
	Missile2WholeChanceMid:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.80, "Missile2.Whole")
		Goto Missile.Whole
	Missile2WholeChanceFar:
		HX08 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.90, "Missile2.Whole")
		Goto Missile.Whole		
	Missile2OneArmChanceNear:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.60, "Missile2.OneArmGone")
		Goto Missile.OneArmGone
	Missile2OneArmChanceMid:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.80, "Missile2.OneArmGone")
		Goto Missile.OneArmGone
	Missile2OneArmChanceFar:
		HX09 A 0 A_JumpIf(FRandom(0.0,1.0) <= 0.90, "Missile2.OneArmGone")
		Goto Missile.OneArmGone		
	Missile2.Whole:
		HX01 A 2 A_FaceTarget
		HX01 B 2 A_FaceTarget
		HX01 C 2 A_FaceTarget
		HX01 D 2 A_FaceTarget
		HX01 E 2 A_FaceTarget
		HX01 F 2 A_FaceTarget
		HX01 G 2 A_FaceTarget
		HX01 H 2 A_FaceTarget
		HX01 I 2 A_FaceTarget HX01 J 0 A_PlaySound("Hexen2/Mummy/Tap", CHAN_WEAPON)
		HX01 J 2 A_FaceTarget
		HX01 K 2 A_FaceTarget
		HX01 L 2 A_FaceTarget
		HX01 M 2 A_FaceTarget
		HX01 N 2 A_FaceTarget
		HX01 O 2 A_FaceTarget
		HX01 P 2 A_FaceTarget
		HX01 Q 0 A_SpawnItemEx("Hexen2RedFlash", -14, 15, 50)
		HX01 Q 0 A_PlaySound("Hexen2/Mummy/Missile", CHAN_WEAPON)
		HX01 Q 2 A_CustomMissile("Hexen2MumShot", 32.0, 15, 0)
		HX01 R 2 A_FaceTarget
		HX01 S 2 A_FaceTarget
		HX01 T 2 A_FaceTarget
		HX01 U 2 A_FaceTarget
		HX01 V 2 A_FaceTarget
		HX01 W 2 A_FaceTarget
		HX01 X 2 A_FaceTarget
		Goto See
	Missile2.OneArmGone:
		HX06 A 2 A_FaceTarget
		HX06 B 2 A_FaceTarget
		HX06 C 2 A_FaceTarget
		HX06 D 2 A_FaceTarget
		HX06 E 2 A_FaceTarget
		HX06 F 2 A_FaceTarget 
		HX06 G 2 A_FaceTarget
		HX06 H 2 A_FaceTarget
		HX06 I 2 A_FaceTarget
		HX06 J 2 A_FaceTarget
		HX06 K 2 A_FaceTarget
		HX06 L 2 A_FaceTarget
		HX06 M 2 A_FaceTarget
		HX06 N 2 A_FaceTarget
		HX06 O 2 A_FaceTarget
		HX06 P 0 A_PlaySound("Hexen2/Mummy/Missile", CHAN_WEAPON)
		HX06 P 2 A_CustomMissile("Hexen2MumShot", 32.0, 15, 0)
		Goto See	
	Death:
	XDeath:
		TNT1 A 0 A_Playsound("Hexen2/Gib", CHAN_5)
		TNT1 A 0 A_Scream
		TNT1 A 0 A_ChangeFlag("SOLID",false)
		TNT1 A 0 A_NoBlocking	
		TNT1 A 0 A_KillMaster
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
		TNT1 A 5 A_SpawnItemEx("Hexen2GibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_SpawnItemEx("Hexen2MummyLordHead",0,0,0,random(-5,5),random(-5,5),frandom(2,6),Random(1,360),SXF_TRANSFERSCALE)
		Stop	
	Pain.ShrinkerDMG:
		HX05 A 0
		"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
		"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
		"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
		"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
		"####" "#" 0 A_NoBlocking
		"####" "#" 0 A_PlaySound("duke/shrink")
		"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
		"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
		"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
		"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
		TNT1 A 2
		TNT1 A 0 A_ChangeFlag("NODAMAGE", 1)
		TNT1 A 0 A_ChangeFlag("NOPAIN", 1)
		TNT1 A 0 A_ChangeFlag("VULNERABLE", 1)
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)
		Goto ShrunkLoop
	ShrunkLoop:
		TNT1 A 2 A_JumpIfInventory("MasterDeadToken",1,"ShrunkDie")
		loop
	ShrunkDie:
		TNT1 A 0
		TNT1 A 1 A_Die("Shrink")
		stop
	Death.Shrink:
		TNT1 A 0
		TNT1 A 1 A_KillMaster
		stop			
		}
}

actor Hexen2MummyLord_Shrink : Hexen2MummyLord
{
	+FRIGHTENED
	+NOTRIGGER
	-SHOOTABLE
	+THRUACTORS
	+NORADIUSDMG
	+VULNERABLE
	+QUICKTORETALIATE
	+COUNTKILL
	-NOGRAVITY
	+NODAMAGE
	+NOPAIN
	MaxStepHeight 0
	MaxDropOffHeight 0
	MeleeRange 16
	Height 16
	Health 1
	Speed 1
	PainChance "ShrinkDMG", 0
	DamageFactor "ShrinkDMG", 0.0
	PainChance "ExpanderDMG", 0
	DamageFactor "ExpanderDMG", 0.0
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_JumpIfInventory("ShrunkToken",1,"SpawnLoop")
			TNT1 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			TNT1 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			TNT1 A 0 A_SetScale(scalex*0.2,scaley*0.2) // setting the scale in ACS does work, but the actor shows up at normal size for a split second
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_Shrinker", 0, 1)
			HX05 A 10
			Goto See
		SpawnLoop:
			HX05 A 10 A_Look
			Loop
		See:
			"####" "#" 0 A_JumpIfInventory("Hexen2MummyOneArmGone", 1, "See2")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 A 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 B 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 E 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 F 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 G 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 H 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 I 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 J 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 K 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 L 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX05 M 2 A_Chase("","")				
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop
		See2:
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 A 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 B 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 C 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 D 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 E 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 F 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 G 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 H 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 I 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 J 2 A_Chase("","")
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 K 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 L 2 A_Chase("","")			
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 M 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 N 2 A_Chase("","")		
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 O 2 A_Chase("","")	
			"####" "#" 0 A_JumpIfInTargetInventory("ChexClass", 1, 5) // this is supposed to be child friendly
			"####" "#" 0 A_JumpIfInTargetInventory("DukeClass", 1, 3)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("Squish")
			"####" "#" 0 A_Jump(256, 2)
			"####" "#" 0 A_JumpIfTargetInSideMeleeRange("DukeStomp")
			HX06 P 2 A_Chase("","")				
			"####" "#" 0 A_JumpIf(CallACS("Samsara_Shrinker", 3) == 0, "Forget")
			Loop		
		Forget:
			"####" "#" 0 A_ClearTarget
			Goto See
		Grow:
			"####" "#" 4 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(1.0*(user_scalex/65536.0),1.0*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Hexen2MummyLord", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 0 A_GiveToChildren("ShrunkPropertyTransfer",1)
			TNT1 A 2 Thing_Remove(0)
			stop
		Squish:
			"####" "#" 0 A_GiveInventory("SquishToken", 1)
			"####" "#" 0 A_JumpIfInTargetInventory("DukeStomp", 1, 2)
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 2 
			"####" "#" 0 A_Jump(256,3)
			"####" "#" 0 
			"####" "#" 2 A_Die("Squish")
			"####" "#" 0
			loop
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A 0 A_GiveInventory("MasterDeadToken", 1, AAPTR_Master)
			stop
		DukeStomp:
			"####" "#" 0 A_GiveToTarget("DukeStomp", 1)
			Goto Squish
	}
}


actor Hexen2MummyLord_ShrinkEffect : Hexen2MummyLord
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			HX05 A 0
			HX05 A 0 A_SetUserVar("user_scalex", scalex*65536.0)
			HX05 A 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}

Actor Hexen2MumShot
{
	Projectile
	+THRUACTORS
	+RIPPER
	+FORCERADIUSDMG
	+FLOORHUGGER
	Damage (0)
	Radius 32
	Height 18
	Speed 6
	ReactionTime 14
	DamageType "Hexen2Fire"
	States	
	{
	Spawn:
		TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3")
		Goto Spawn1
	Spawn1:
		HX01 A 2 BRIGHT A_Countdown
		HX01 B 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 C 2 BRIGHT 
		HX01 D 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 E 2 BRIGHT 
		HX01 F 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 G 2 BRIGHT 
		HX01 H 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 I 2 BRIGHT
		HX01 J 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 K 2 BRIGHT 
		HX01 L 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 M 2 BRIGHT
		HX01 N 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 O 2 BRIGHT
		HX01 P 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX01 Q 2 BRIGHT 
		Loop
	Spawn2:
		HX00 A 2 BRIGHT A_Countdown
		HX00 B 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 C 2 BRIGHT 
		HX00 D 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 E 2 BRIGHT 
		HX00 F 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 G 2 BRIGHT 
		HX00 H 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 I 2 BRIGHT
		HX00 J 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 K 2 BRIGHT 
		HX00 L 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 M 2 BRIGHT
		HX00 N 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 O 2 BRIGHT
		HX00 P 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX00 Q 2 BRIGHT 
		Loop
	Spawn3:
		HX02 A 2 BRIGHT A_Countdown
		HX02 B 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 C 2 BRIGHT 
		HX02 D 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 E 2 BRIGHT 
		HX02 F 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 G 2 BRIGHT 
		HX02 H 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 I 2 BRIGHT
		HX02 J 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 K 2 BRIGHT 
		HX02 L 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 M 2 BRIGHT
		HX02 N 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 O 2 BRIGHT
		HX02 P 2 BRIGHT A_Explode(3+Random(0,1)*3, 32, !XF_HURTSOURCE, false)
		HX02 Q 2 BRIGHT 
		Loop
	Death:
	XDeath:
	Crash:
		HX00 A 0 A_Explode(15+random(0,1)*10, 32, !XF_HURTSOURCE)
		HX00 A 0 A_FadeOut
		Stop
		}
}		