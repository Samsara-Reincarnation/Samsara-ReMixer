Actor KILMAAT_Below2500 : Inventory { inventory.maxamount 1 }
Actor Kilmaatikahn : SamsaraMonsterAlienBoss
{
    obituary "%o submitted before the Kilmaatikahn."
    hitobituary "%o submitted before the Kilmaatikahn."
    health 2000
    height 108
    radius 36
    scale 0.8
    painchance 30
    meleerange 64
    meleedamage 5
    mass 2400
    speed 10
    seesound "kilmaatikahn/see1"
	activesound "kilmaatikahn/act"
    painsound "kilmaatikahn/pain"
    deathsound "kilmaatikahn/fakedeath"
    MONSTER
	Species "ExhumedEnemies"
    +BOSS
    +BOSSDEATH	
	+DONTHARMCLASS
    //+DONTHURTSPECIES
    +DONTMORPH
	+DONTRIP
    +FLOORCLIP
    +INVULNERABLE
	+NODAMAGE
    +NOFEAR
	+NOINFIGHTING
	+NOPAIN
    +NORADIUSDMG
    +NOTIMEFREEZE
    DamageFactor "Mace", 1.2
	DamageFactor "CorvusHellstaffTomed", 0.2	
    DamageFactor "CorvusCrossbow", 1.1	
    DamageFactor "DragonClaw", 1.5
	DamageFactor "MarathonShotgun", 0.9
	DamageFactor "MarathonPlasmaFire", 0.90
	DamageFactor "MarathonFusion", 0.8
    DamageFactor "WMCNade", 0.8
    DamageFactor "BJSpear", 0.5
	DamageFactor "DCannonProj", 0.8	
	DamageFactor "Tesla", 0.6
	DamageFactor "Shock", 0.3
	DamageFactor "LifeLeech", 0.7		
	DamageFactor "CalebFire", 0.8	
    DamageFactor "CalebBullet", 0.8	
	DamageFactor "Vodoo", 0.2
	DamageFactor "DisruptorWall", 0.3
	DamageFactor "EradNova", 0.3
    DamageFactor "EradGreenFire", 0.1
    DamageFactor "EradCoopGreenFire", 0.1
	DamageFactor "RottFire", 0.6
	DamageFactor "HLLaser", 0.4
	DamageFactor "WTRangedFire", 0.6
	DamageFactor "Nuke", 0.6
	DamageFactor "SWNuke", 0.6
	DamageFactor "SWNukeCoop", 0.6
	DamageFactor "SWFlame", 0.2
	DamageFactor "SWFlameCoop", 0.2
	DamageFactor "SWFlame2", 0.2	
	DamageFactor "SWFlame2Coop", 0.2
	DamageFactor "SWFlame3", 0.7
    DamageFactor "RMR-BigPlasma", 0.4		
	DamageFactor "CMDMGSHIT", 0.8
	DamageFactor "Disintegrate", 0.8	
	DamageFactor "RottBullet", 0.8
	DamageFactor "C7Disintegrate", 0.5	
	PainChance "ShrinkerDMG", 0
    States
    {
	  Spawn:
		KBOS I 0
		TNT1 A 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		TNT1 A 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		TNT1 A 0 A_GiveInventory("AlreadySpawned",1)
      Spawn2:
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossMonologue", 25)
        goto Idle

      SpawnMonologue:
        KBOS I 80 A_SetTranslucent(0)
        TNT1 A 0 A_SetTranslucent(0.1)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.2)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.3)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.4)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.5)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.6)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.7)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.8)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(0.9)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        KBOS IIIIIIIIIIIIII 1 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,random(1,4),0,SXF_CLIENTSIDE)
        TNT1 A 0 A_SetTranslucent(1)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBossMonologueSetRenderStyle", 1) // STYLE_Normal
        TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,4,0,SXF_CLIENTSIDE)
        TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,4,0,SXF_CLIENTSIDE)
        TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,4,0,SXF_CLIENTSIDE)
        TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,4,0,SXF_CLIENTSIDE)
        TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("StarSparkle",random(-32,32),random(-32,32),random(0,8),0,0,4,0,SXF_CLIENTSIDE)
        KBOS III 140 // for extra dialogue
        KBOS I 100
        goto Idle

      Idle:
        TNT1 A 0 A_GiveInventory("SamsaraBossMonologueFlagsDisabler")
      IdleLoop:
        TNT1 A 0 A_JumpIfHealthLower(1000,"Spawn_TailLess")
        KBOS I 5 A_Look
        loop

    See:
		TNT1 A 0 A_GiveInventory("SamsaraBossMonologueFlagsDisabler")
		TNT1 A 0 A_JumpIfHealthLower(1000, "See_TailLess")
		TNT1 A 0 A_GiveInventory("SamsaraBossSightTaunt")
	See2:
		KBOS A 2 A_Chase("Melee","",CHF_NOPLAYACTIVE)
		KBOS AB 2 A_Chase("Melee","Missile")
		KBOS B 2 A_Chase("Melee","",CHF_NOPLAYACTIVE)
		KBOS CC 2 A_Chase("Melee","Missile")
		KBOS D 2 A_Chase("Melee","Missile",CHF_NOPLAYACTIVE)
		KBOS DE 2 A_Chase("Melee","Missile")
		KBOS E 2 A_Chase("Melee","",CHF_NOPLAYACTIVE)
		loop
	Ramming:
		TNT1 A 0 A_PlaySound("ammit/melee2",5)
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBOS P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_Jump(110,"Ramming")
		Goto See
    Missile:
		KBOS A 0 A_Jump(66,"Rammin") //Charge towards player (depending on distance.  Doesn't do it if more than 768 units away.)	
		KBOS A 0 A_Jump(112,"TailShot") //Tail shot
		KBOS A 0 A_Jump(104,"Missile2") //Spawn small ball thingys with a set of teeth
		KBOS A 0 A_Jump(98,"Missile3") //Spawn wasp
	TailShot:	
		KBOS F 5 A_FaceTarget
	ContTailShot:
		KBOS G 5 A_FaceTarget
		KBOS H 0 A_PlaySound("kilmaatikahn/taillaser")
		KBOS H 6 Bright A_CustomMissile("Kilmaatikahnball",70,-24,0)
		KBOS G 5 A_FaceTarget
		KBOS H 0 A_SpidRefire
		KBOS H 0 A_Jump(64,1)
		Goto ContTailShot
		KBOS H 0
		Goto See
	Missile2:
		KBOS IJ 3 A_FaceTarget
		KBOS K 0 A_PlaySound("kilmaatikahn/spit")
		TNT1 AAAA 0 A_SpawnItemEx("KilmaatBossMouthMinionSpawner",20,0,20,random(-650,650)/100.00,random(-650,650)/50.00,random(500,1000)/50.00,random(-180,180))
		KBOS K 10 Bright A_SpawnItemEx("KilmaatBossMouthMinionSpawner",20,0,20,random(-650,650)/100.00,random(-650,650)/50.00,random(500,1000)/50.00,random(-180,180))
		KBOS J 10 A_FaceTarget
		KBOS I 10 A_SpidRefire
		TNT1 A 0 A_Jump(96,1)
		Goto Missile
		TNT1 A 0
		Goto See
    Missile3:
		TNT1 A 0 A_Jump(60,"LayEgg")
		KBOS IJ 4 A_FaceTarget
		KBOS K 0 A_PlaySound("kilmaatikahn/spit")
		KBOS K 5 Bright A_PainAttack("KilmaatikahnWasp")
		KBOS J 5 A_FaceTarget
		TNT1 A 0 A_Jump(140,1)
		Goto Missile
		KBOS I 0
		Goto See
	LayEgg:
		KBOS IIII 3 A_FaceTarget
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)		
		TNT1 A 0 A_Jump(128,"LayEggAnim2","LayEggAnim3")		
		KBS3 TUVWXY 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)				
		KBS3 YXWVUT 3
		KBOS I 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile
		TNT1 A 0
		Goto See
	LayEggAnim2:
		KBS4 QRSTU 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)				
		KBS4 UTSRQ 3
		KBOS C 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile
		TNT1 A 0
		Goto See
	LayEggAnim3:
		KBOS CCCCCC 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)				
		KBOS C 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile
		TNT1 A 0
		Goto See		
	Rammin:
		TNT1 A 0 A_Jump(80,"Think")	
		TNT1 A 0 A_JumpIfCloser(768,1)
		Goto Missile+1
		TNT1 A 0 A_FaceTarget
		Goto Ramming
	Think:
		KBOS IIII 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)		
		TNT1 A 0 A_Jump(100,"WingScream","Scream")
		TNT1 A 0 A_Jump(24,"WingedRamminStart")
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile
		TNT1 A 0
		Goto See
	Scream:
		KBOS CCCCCC 3
		KBOS C 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile+1
		TNT1 A 0
		Goto See		
	WingScream:
		KBS4 QRSTUUTSRQ 3
		KBOS C 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile+1
		TNT1 A 0
		Goto See
	WingedRamminStart:
		KBS4 QRSTU 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_JumpIfCloser(768,1)
		Goto WingedRamming		
		KBS4 UTSRQ 3
		KBOS C 3
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile+1		
		TNT1 A 0
		Goto See
	Melee:
		TNT1 A 0 A_PlaySound("kilmaatikahn/bite",CHAN_WEAPON)	
		KBOS LM 4 A_FaceTarget
		KBOS N 4 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		KBOS OP 4 A_FaceTarget
		Goto See
    Pain:
		TNT1 A 0 A_JumpIfHealthLower(2500, "Pain_TailLess")	
		TNT1 A 0 A_Jump(90,"ThinkScream")
		KBOS L 5 A_Pain
		KBOS A 3
		Goto See
	ThinkScream:
		KBOS IIII 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)
		KBS3 TUVWXYYXWVUT 3
		KBOS I 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		Goto See
	WingedRamming:
		TNT1 A 0 A_PlaySound("ammit/melee2",5)	
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 G 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 G 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 G 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 H 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 H 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 H 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 I 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 I 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 I 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 J 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 J 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 J 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 K 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 K 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 K 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_Jump(110,"WingedRamming")
		Goto See
	Spawn_TailLess:
		KBS3 L 5 A_Look
		Loop	
	See_TailLess:
		TNT1 A 0 A_JumpIfInventory("KILMAAT_Below2500", 1, "See_TailLess_Loop")	
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("omenwasp2/grenadeboom",5)
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",6)		
		TNT1 A 0 A_CustomMissile("PowerslaveExplosion",70,-24,0)
		KBOS IIICCCC 3
		TNT1 A 0 A_GiveInventory("KILMAAT_Below2500", 1)			
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
	See_TailLess_Loop:
		KBS3 G 2 A_Chase("Melee_TailLess","Missile_TailLess",CHF_NOPLAYACTIVE)
		KBS3 GH 2 A_Chase("Melee_TailLess","Missile_TailLess")
		KBS3 H 2 A_Chase("Melee_TailLess","Missile_TailLess",CHF_NOPLAYACTIVE)
		KBS3 II 2 A_Chase("Melee_TailLess","Missile_TailLess")
		KBS3 J 2 A_Chase("Melee_TailLess","Missile_TailLess",CHF_NOPLAYACTIVE)
		KBS3 JK 2 A_Chase("Melee_TailLess","Missile_TailLess")
		KBS3 K 2 A_Chase("Melee_TailLess","Missile_TailLess",CHF_NOPLAYACTIVE)
		loop
    Pain_TailLess:
		TNT1 A 0 A_Jump(90,"ThinkScream_TailLess")
		KBS3 O 5 A_Pain
		KBS3 G 3
		Goto See_TailLess_Loop		
	ThinkScream_TailLess:
		KBS3 LLLL 3	
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)		
		KBS4 ABCDEFFEDCBA 3
		KB3S L 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		Goto See_TailLess_Loop		
	Melee_TailLess:
		TNT1 A 0 A_PlaySound("kilmaatikahn/bite",CHAN_WEAPON)	
		KBS3 OP 4 A_FaceTarget
		KBS3 Q 4 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		KBS3 RS 4 A_FaceTarget
		Goto See_TailLess_Loop
    Missile_TailLess:
		KBOS A 0 A_Jump(66,"Rammin_TailLess") //Charge towards player (depending on distance.  Doesn't do it if more than 768 units away.)	
		KBOS A 0 A_Jump(104,"Missile2_TailLess") //Spawn small ball thingys with a set of teeth
		KBOS A 0 A_Jump(98,"Missile3_TailLess") //Spawn wasp
	Missile2_TailLess:
		KBS3 LM 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("kilmaatikahn/spit")
		TNT1 AAAA 0 A_SpawnItemEx("KilmaatBossMouthMinionSpawner",20,0,20,random(-650,650)/100.00,random(-650,650)/50.00,random(500,1000)/50.00,random(-180,180))
		KBS3 N 5 Bright A_SpawnItemEx("KilmaatBossMouthMinionSpawner",20,0,20,random(-650,650)/100.00,random(-650,650)/50.00,random(500,1000)/50.00,random(-180,180))
		KBS3 NMML 5 A_FaceTarget
		KBS3 L 5 A_SpidRefire
		TNT1 A 0 A_Jump(96,1)
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
    Missile3_TailLess:
		TNT1 A 0 A_Jump(60,"LayEgg_TailLess")
		KBS3 LM 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("kilmaatikahn/spit")
		KBS3 N 5 Bright A_PainAttack("KilmaatikahnWasp")
		KBS3 M 5 A_FaceTarget
		TNT1 A 0 A_Jump(140,1)
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
	LayEgg_TailLess:
		KBS3 LLLL 3 A_FaceTarget
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)		
		TNT1 A 0 A_Jump(128,"LayEggAnim2_TailLess","LayEggAnim3_TailLess")
		KBS4 ABCDEF 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)		
		KBS4 FEDCBA 3
		KBS3 L 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
	LayEggAnim2_TailLess:
		KBS4 VWXYZ 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)				
		KBS4 ZYXWV 3 
		KBS3 I 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
	LayEggAnim3_TailLess:
		KBS3 IIIIII 3
		TNT1 A 0 A_CustomMissile("KilmaatikahnWaspEggSpawner",0,0,0)		
		KBS3 I 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(140,1)
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
	Rammin_TailLess:
		TNT1 A 0 A_Jump(80,"Think_TailLess")	
		TNT1 A 0 A_JumpIfCloser(768,1)
		Goto Missile_TailLess+1
		TNT1 A 0 A_FaceTarget
		Goto Ramming_TailLess
	Think_TailLess:
		KBS3 LLLL 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)		
		TNT1 A 0 A_PlaySound("kilmaatikahn/roar",5)		
		TNT1 A 0 A_Jump(100,"WingScream_TailLess","Scream_TailLess")
		TNT1 A 0 A_Jump(24,"WingedRamminStart_TailLess")
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile_TailLess
		TNT1 A 0
		Goto See_TailLess_Loop
	Scream_TailLess:
		KBS3 IIII 3
		KBS3 I 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile_TailLess+1
		TNT1 A 0
		Goto See_TailLess_Loop		
	WingScream_TailLess:
		KBS4 VWXYZZYXWV 3
		KBS3 I 1
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile_TailLess+1
		TNT1 A 0
		Goto See_TailLess_Loop		
	WingedRamminStart_TailLess:
		KBS4 VWXYZ 3
		TNT1 A 0 A_ChangeFlag(NOPAIN,0)		
		TNT1 A 0 A_JumpIfCloser(768,1)
		Goto WingedRamming_TailLess		
		KBS4 ZYXWV 3
		KBS3 I 1
		TNT1 A 0 A_Jump(128,1)		
		Goto Missile_TailLess+1		
		TNT1 A 0
		Goto See_TailLess_Loop
	Ramming_TailLess:
		TNT1 A 0 A_PlaySound("ammit/melee2",5)
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 Q 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 Q 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 Q 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 R 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 R 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 R 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 S 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 S 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS3 S 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_Jump(80,"Ramming_TailLess")
		Goto See_TailLess_Loop	
	WingedRamming_TailLess:
		TNT1 A 0 A_PlaySound("ammit/melee2",5)	
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 L 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 M 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 N 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 O 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","",CHF_NOPLAYACTIVE)		
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		TNT1 A 0 A_FaceTarget
		KBS4 P 1 A_MeleeAttack
		TNT1 A 0 A_Chase("","")		
		TNT1 A 0 A_Jump(80,"WingedRamming_TailLess")
		Goto See_TailLess_Loop		
    Death:
	    TNT1 A 0 A_GiveToTarget("KillCount",1)
		TNT1 A 0
		KBOS Q 70 A_Scream
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_PlaySound("set/spiritexplode",7,1.0,0,ATTN_NORM)		
		TNT1 A 0 A_PlaySound("Jon/XGibs",CHAN_BODY,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAA 0 A_CustomMissile("kilmaatikahnguts1",random(0,50),0,random(-180,180),2,random(10,25))
		TNT1 AAAAAAAA 0 A_CustomMissile("kilmaatikahnguts2",random(0,50),0,random(-180,180),2,random(10,25))
		TNT1 AAAAAAAA 0 A_CustomMissile("kilmaatikahnguts3",random(0,50),0,random(-180,180),2,random(10,25))
		TNT1 AA 0 A_CustomMissile("kilmaatikahnguts4",random(0,50),0,random(-180,180),2,random(10,25))
		TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("kilmaatikahnorangeballblood",random(25,75),0,random(-180,180),2,random(10,25))
		TNT1 A 0 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
		KBOS RSTUV 4 Bright
		KBOS V 35
		KBOS V -1
		stop
		
		// SamsaraMonsterAlienBoss states
		Death.ZorchPistol:
		Death.Zorch:
		Death.ZorchKamikaze:
		Death.PhasingZorch:
		Death.ZorchSpectral:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound")
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_PlaySound("chex/zorchhuge",CHAN_5)
			"####" "#" 0 A_NoGravity
			"####" "#" 8 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 1)
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 8 A_SetTranslucent(0.9,0)
			"####" "#" 0 A_Scream
			"####" "#" 8 A_SetTranslucent(0.8,0)
			"####" "#" 0 A_NoBlocking
			"####" "#" 8 A_SetTranslucent(0.7,0)
			"####" "#" 8 A_SetTranslucent(0.6,0)
			"####" "#" 8 A_SetTranslucent(0.5,0)
			"####" "#" 8 A_SetTranslucent(0.4,0)
			"####" "#" 8 A_SetTranslucent(0.3,0)
			"####" "#" 8 A_SetTranslucent(0.2,0)
			"####" "#" 8 A_SetTranslucent(0.1,0)
			TNT1 A 1 A_SetTranslucent(1,0)
			TNT1 A 0 A_Gravity
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
		Death.DukePlasma:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound")
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_NoGravity
			"####" "#" 1 A_NoBlocking
			"####" "#" 0 A_GiveToTarget("DukeBossKillTaunt",1)
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 12)
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 27 A_Scream
			TNT1 A 1 A_SetTranslucent(1,0)
			TNT1 A 0 A_Gravity
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
		Death.RottDisintegrate:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound", 1)
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_NoGravity
			"####" "#" 0 A_Scream
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 3 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 13)
			"####" "#" 3 A_SetTranslucent(0.9,0)
			"####" "#" 3 A_SetTranslucent(0.8,0)
			"####" "#" 3 A_SetTranslucent(0.7,0)
			"####" "#" 3 A_SetTranslucent(0.6,0)
			"####" "#" 3 A_SetTranslucent(0.5,0)
			"####" "#" 3 A_SetTranslucent(0.4,0)
			"####" "#" 3 A_SetTranslucent(0.3,0)
			"####" "#" 3 A_SetTranslucent(0.2,0)
			"####" "#" 3 A_SetTranslucent(0.1,0)
			TNT1 A 0 A_SetTranslucent(1,0)
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 9000)
			TNT1 A 0 A_Gravity
			TNT1 A 0 A_NoBlocking
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
		Disintegrate:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound", 1)
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_NoGravity
			"####" "#" 0 A_Scream
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 3 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 10)
			"####" "#" 3 A_SetTranslucent(0.9,0)
			"####" "#" 3 A_SetTranslucent(0.8,0)
			"####" "#" 0 A_NoBlocking
			"####" "#" 3 A_SetTranslucent(0.7,0)
			"####" "#" 3 A_SetTranslucent(0.6,0)
			"####" "#" 3 A_SetTranslucent(0.5,0)
			"####" "#" 2 A_SetTranslucent(0.4,0)
			"####" "#" 2 A_SetTranslucent(0.3,0)
			"####" "#" 2 A_SetTranslucent(0.2,0)
			"####" "#" 2 A_SetTranslucent(0.1,0)
			TNT1 A 1 A_SetTranslucent(1,0)
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 9000)
			TNT1 A 0 A_Gravity
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
		Death.Nuke:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound", 1)
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_NoGravity
			"####" "#" 0 A_Scream
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 14)
			"####" "#" 0 A_NoBlocking
			"####" "#################" 3 A_FadeOut(0.05,0)
			TNT1 A 0 A_Gravity
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
		Death.DukeIce:
			"####" "#" 0 A_GiveToTarget("DukeBossKillTaunt",1)
		Ice:
		Death.HexenIce:
		Death.WTMeleeIce:
		Death.WTRangedIce:
		Death.DoomDamageTypeIce:
		Death.Ice:
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraActorStopSound", 1)
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 0 ACS_NamedExecuteWithResult("SamsaraBossDeathToggler")
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 100)
			"####" "#" 0 A_SpawnItemEx("UniversalBloodyHellIceDeathSoundForBosses",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 0 A_Scream
			"####" "#" 209 A_ChangeFlag("SOLID",false)
			"####" "#" 1 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 16)
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellIceDeathEffect2ForBosses",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			TNT1 A 0 A_SetTranslucent(1,0)
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDeathEffects", 0, 9000)
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Gravity
			TNT1 A -1 A_SpawnItemEx("kilmaatikahn2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			Stop
    }
}

ACTOR Kilmaatikahnball
{
	Radius 8
	Height 13
	Speed 30
	Damage 6
	Projectile 
	+RANDOMIZE
	DeathSound "ancientmummy/balhit"
	Scale 0.65
	States
	{
	Spawn:
		KBOS XY 3 Bright
		Loop
	Death:
		KBOS Z 4 Bright
		KILM W 4 Bright
		TNT1 A 1 Bright A_CustomMissile("KilmaatikahnballF",0,0,0)
		Stop
	}
}

Actor KilmaatikahnballF
{
	+NOINTERACTION
	+CLIENTSIDEONLY
	+FORCEXYBILLBOARD
	Scale 0.75
	States
	{
	  Spawn:
	    KBS2 PQRS 3 bright
        Stop
    }
}

Actor KilmaatBossMouthMinionSpawner
{
    radius 4
    height 8
    speed 14
    scale 0.4
    PROJECTILE
	Species "ExhumedEnemies"
	-NOGRAVITY
    +MISSILE
    +STRIFEDAMAGE
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
    states
    {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,Random(10,15)+Random(5,0),0,0)
	SpawnLoop:
		KBS2 C 1 Bright
		loop
	Death:
		KBS2 C 50 Bright
		TNT1 A 0 A_PlaySound("PS/MineExplode")
		KBS2 C 0 A_Explode(128,50,0)
		TNT1 C 0 A_SpawnItemEx("PowerslaveExplosion",0,25,0)
		TNT1 A 1
		TNT1 A 1 A_SpawnItemEx("KilmaatMouthMinion",0,5,0)
		TNT1 A 5
		stop
    }
}

Actor KilmaatMouthMinion : SamsaraMonsterAlienTotalGib
{
    obituary "%o was devoured by Kilmaatikahn parasites"
    radius 16
    height 22
    speed 10
	Tag "Mouth Parasite"
	floatspeed 50
    health 20
    meleedamage 1
    meleerange 28
    MONSTER
	Species "ExhumedEnemies"
	SeeSound "kilmaatminion/see"
	BounceSound "kilmaatminion/bounce"
	DeathSound "Jon/XGibs"
	ActiveSound "kilmaatminion/bounce"
	+FLOORCLIP
    -COUNTKILL
	+NOGRAVITY
	+FLOAT
	+FLOATBOB
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	+BOUNCEONCEILINGS
	-BOUNCEONACTORS
	+NOINFIGHTING
	Scale 0.50
    States
    {
    Spawn:
		KBS2 H 0
		KBS2 H 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		KBS2 H 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		KBS2 H 0 A_GiveInventory("AlreadySpawned",1)
	Spawn2:
		KBS2 H 5 A_Look
		loop
    See:
		KBS2 HHHHIIII 1 A_Chase
		loop
    Melee:
		KBS2 H 4 A_FaceTarget
		KBS2 I 0 A_PlaySound("kilmaatminion/bite")
		KBS2 I 4 A_MeleeAttack
		Goto See
    Death:
		TNT1 A 0 A_GiveToTarget("KillCount",1)	
		TNT1 A 0 A_Scream
		TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreXDeathEffect")		
		TNT1 AAAAA 0 A_CustomMissile("kilmaatikahnminionguts1",random(0,30),0,random(-180,180),2,random(0,12))
		TNT1 AAAAA 0 A_CustomMissile("kilmaatikahnminionguts2",random(0,30),0,random(-180,180),2,random(0,12))
		TNT1 A 5 A_NoBlocking
		stop
    }
}

ACTOR KilmaatikahnWaspEggSpawner
{
    scale 0.9
	Species "ExhumedEnemies"
	Health 50
    Tag "Ancient Wasp Egg"
	-NOGRAVITY
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+NOBLOCKMONST
	-NOBLOCKMAP
	+SHOOTABLE
	+SOLID
	+ISMONSTER
	-COUNTKILL
	+LOOKALLAROUND
	+NOBLOOD
    Radius 14
    Height 16
    States
    {
    Spawn:
		KBS2 J 0
		KBS2 J 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		KBS2 J 0 A_GiveInventory("MultiplyOverflowToken", 1)
		KBS2 J 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		KBS2 J 0 A_GiveInventory("AlreadySpawned",1)
	Spawn2:
		KBS2 B 100
		TNT1 A 0 A_Jump(60,"Hatch")		
		KBS2 B 100		
		TNT1 A 0 A_Jump(80,"Hatch")
		KBS2 B 100
		TNT1 A 0 A_Jump(100,"Hatch")		
		KBS2 B 100
		TNT1 A 0 A_Jump(128,"Hatch")		
		KBS2 B 100		
		Goto Hatch
	Hatch:
		KBS2 B 1 A_Die("Hatched")
		Wait
	Death:
		TNT1 A 0 A_ChangeFlag("SOLID",false)	
		TNT1 A 0 A_PlaySound("omenwasp/sting")
		TNT1 AAAAA 0 A_SpawnDebris("KilmaatikahnWaspEggPiece1")
		TNT1 AAAAA 0 A_SpawnDebris("KilmaatikahnWaspEggPiece2")
		TNT1 A 0 A_Jump(100,2)
		TNT1 A 0 A_PainAttack("KilmaatikahnWasp")
		TNT1 A 0
		TNT1 A 5
		Stop
	Death.Hatched:
		TNT1 A 0 A_ChangeFlag("SOLID",false)
		TNT1 A 0 A_PlaySound("omenwasp/sting")	
		TNT1 AAAAA 0 A_SpawnDebris("KilmaatikahnWaspEggPiece1")
		TNT1 AAAAA 0 A_SpawnDebris("KilmaatikahnWaspEggPiece2")	
		TNT1 A 1 A_SpawnItemEx("KilmaatikahnWasp",0,5,0,0,0,0,SXF_SETMASTER)
		TNT1 A 5
		Stop	
    }
}

Actor KilmaatikahnWaspEggPiece1
{
  Radius 1
  Height 1
  Speed 3
  Health 1
  Projectile
  -NOGRAVITY
  +WINDTHRUST
  +NOBLOCKMAP
  +NOBLOCKMONST
  +CLIENTSIDEONLY
  +LOWGRAVITY
  +NOTELEPORT
  +MOVEWITHSECTOR
  -SOLID
  +THRUACTORS
  +EXPLODEONWATER
  -TELESTOMP
  Scale 0.7
  Gravity 0.8
  States
  {
  Spawn:
    KBS3 E 1
    Loop
  Death:
	KBS3 E 2000 A_SetFloorClip
    KBS3 E 1 A_FadeOut
    Stop
  }
}

Actor KilmaatikahnWaspEggPiece2 : KilmaatikahnWaspEggPiece1 {
	States {
	Spawn:
		KBS3 F 1
		Loop
	Death:
		KBS3 F 2000 A_SetFloorClip
		KBS3 F 1 A_FadeOut
		Stop
	}
}

Actor KilmaatikahnWasp : SamsaraMonsterAlienTotalGib
{
	obituary "%o submitted before the Kilmaatikahn."
    health 50
    scale 0.75
    Radius 16
	Height 44
	Tag "Ancient Wasp"
	Mass 100
	speed 15
    meleedamage 5
    meleesound "omenwasp/sting"
    deathsound "omenwasp/death"
    MONSTER
	Species "ExhumedEnemies"
    +NOGRAVITY
    +FLOAT
    +FLOATBOB
    +FLOORCLIP
	+LOOKALLAROUND
	+NOINFIGHTING
    States
    {
    Spawn:
		KBS2 J 0 A_ChangeFlag(FLOATBOB,1)
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)
		KBS2 JJ 1 A_Look
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)
		KBS2 KK 1 A_Look
		loop
    See:
		KBS2 J 0 A_ChangeFlag(FLOATBOB,0)
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)
		KBS2 JJ 1 A_Chase
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)
		KBS2 KK 1 A_Chase
		loop
    Melee:
		KBS2 L 0 A_PlaySound("omenwasp/attack",CHAN_VOICE)
		KBS2 L 1 A_FaceTarget
		KBS2 L 3 A_MeleeAttack
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		KBS2 J 0 A_PlaySound("omenwasp/flying",5)		
		KBS2 JJ 1 A_Wander
		KBS2 K 0 A_PlaySound("omenwasp/flying",6)		
		KBS2 KK 1 A_Wander
		Goto See
    Death:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)	
		HAWK I 3 A_Scream
		P_BS F 3
		P_BS G 3 A_NoBlocking
		P_BS H 3
		TNT1 A -1
		Stop
	}
}

Actor kilmaatikahnguts1
{
    BounceFactor 0.38
    +DOOMBOUNCE
    Speed 8
    Projectile
    Scale 0.6
	+CLIENTSIDEONLY
    -NOGRAVITY
	-SOLID	
    seesound "misc/powerslavegib"
    deathsound "misc/powerslavegib"
    states
    {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(10,30),0,1)
		KBS2 EEEEEEEEEEEEEEEE 2
    Death:
		KBS2 E 500
		KBS2 E 1 A_FadeOut
		Goto Death+1
    }
}

Actor kilmaatikahnguts2 : kilmaatikahnguts1
{
    states
    {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(10,30),0,1)
		KBS2 FFFFFFFFFFFFF 2 
    Death:
		KBS2 F 500
		KBS2 F 1 A_FadeOut
		Goto Death+1
    }
}

Actor kilmaatikahnguts3 : kilmaatikahnguts1  
{
    states
    {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(10,30),0,1)
		KBS2 GGGGGGGGGGGGG 2 
    Death:
		KBS2 G 500
		KBS2 G 1 A_FadeOut
		Goto Death+1
    }
}

Actor kilmaatikahnguts4 : kilmaatikahnguts1
{
    scale 1
    states
    {
    Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(10,30),0,1)
		KBS2 AAAAAAAAAAAAA 2 
    Death:
		KBS2 A 500
		KBS2 A 1 A_FadeOut
		Goto Death+1
    }
}

Actor kilmaatikahnorangeballblood : kilmaatikahnguts1
{
    speed 15
    scale 0.3
    Translation "168:191=208:223"
    states
    {
    Spawn:
		KBS2 C 1 A_Gravity
		loop
    Death:
		KBS2 C 500
		KBS2 C 1 A_FadeOut
		Goto Death+1
    }
}

Actor kilmaatikahnminionguts1 : kilmaatikahnguts1 { scale 0.4 }
Actor kilmaatikahnminionguts2 : kilmaatikahnguts2 { scale 0.4 }

//This is spawned after the main actor is killed
Actor kilmaatikahn2 : SamsaraMonsterAlienBoss
{
	Tag "Kilmaatikahn Snake"
    health 1400 //200 health for each segment
    scale 0.8
    obituary "%o failed to finish the Kilmaatikahn off."
    radius 20
    height 40
    speed 20
    MONSTER
	Species "ExhumedEnemies"	
    +BOSS
	+BOSSDEATH
    +LOOKALLAROUND
    +DROPOFF
	+NOICEDEATH
    +FLOORCLIP
    +DONTMORPH
    +NOFEAR
	+NOINFIGHTING
    meleedamage 3
    seesound "kilmaatikahn/see2"
	activesound "kilmaatikahn/snake"
    deathsound "kilmaatikahn/realdeath"
    States
    {
    Spawn:
		KBOS W 0
		KBOS W 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		KBOS W 0 A_GiveInventory("MultiplyOverflowToken", 1)
		KBOS W 1 ACS_NamedExecuteAlways("ReMixerSpawnScript",0,1,0)
		KBOS W 0 A_GiveInventory("AlreadySpawned",1)
	Spawn2:
		KBOS W 0
		KBOS W 1 A_JumpIfInventory("KilmaatSpawnstatecheck",1,7)
		KBOS WW 0 A_UnSetShootable
		KBOS W 0 //A_PlaySound("set/spiritexplode")
		KBOS W 200
		KBOS W 0 A_SetShootable
		KBOS W 0 A_GiveInventory("KilmaatSpawnstatecheck",1)
	KiilChecker:
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",6,12)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",5,10)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",4,8)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",3,6)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",2,4)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",1,2)
	KiilMove:
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail1",-8,0,0)
		Goto See
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail2",-8,0,0)
		Goto See
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail3",-8,0,0)
		Goto See
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail4",-8,0,0)
		Goto See
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail5",-8,0,0)
		Goto See
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail6",-8,0,0)
		Goto See
		KBS3 A 0 A_Look
		KBS3 A 2 A_Wander
		Goto KiilChecker
    See:
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",6,30) //The purpose of these is to limit kilmaatikahn's tail length to show how close it is to dying.
		KBS3 A 0 A_JumpIfHealthLower(200,51)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",5,25)
		KBS3 A 0 A_JumpIfHealthLower(400,45)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",4,20)
		KBS3 A 0 A_JumpIfHealthLower(600,39)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",3,15)
		KBS3 A 0 A_JumpIfHealthLower(800,33)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",2,10)
		KBS3 A 0 A_JumpIfHealthLower(1000,27)
		KBS3 A 0 A_JumpIfInventory("kilmaatikahnSnakecheck",1,5)
		KBS3 A 0 A_JumpIfHealthLower(1200,21)
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail1",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,42) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail2",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,39) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail3",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,36) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail4",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,33) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail5",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,30) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_SpawnItem("kilmaatikahnTail6",-8,0,0)
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,27) //Jump to Jumping Sequence
		loop
		KBS3 A 2 A_Chase
		KBS3 A 0 A_Jump(1,25) //Jump to Jumping Sequence
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",1)
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",2)
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",3)
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",4)
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",5)
		loop
		KBS3 A 0 A_TakeInventory("kilmaatikahnSnakecheck",6)
		KBS3 A 0 A_PlaySound("set/spiritexplode")
		KBS3 A 0 A_SpawnItem("Powerslaveexplosion",0,10,0)
		KBS3 A 0 A_GiveInventory("kilmaatikahnSnakecheck",6)
		loop
		KBS3 A 0 ThrustThingZ(0,64,0,1)
		KBS3 A 0 A_Recoil(-10)
		loop
	Melee:
		KBS3 B 0 A_FaceTarget
		KBS3 B 0 A_MeleeAttack
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",6,30)
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",5,25)
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",4,20)
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",3,15)
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",2,10)
		KBS3 B 0 A_JumpIfInventory("kilmaatikahnSnakecheck",1,5)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail1",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail1",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail2",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail2",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail3",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail3",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail4",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail4",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail5",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail5",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail6",-8,0,0)
		KBS3 B 2 A_ExtChase(0,0)
		KBS3 B 0 A_SpawnItem("kilmaatikahnTail6",-8,0,0)
		KBS3 A 2 A_ExtChase(0,0)  
		Goto See
		KBS3 BA 2 A_ExtChase(0,0)
		Goto See
    Death:
	ForcedEnd:
		TNT1 A 0 A_GiveToTarget("KillCount",1)
		TNT1 A 0 A_Scream
		KBS3 B 1 A_CustomMissile("PowerslaveExplosion2kilmaatikahn",12,random(-23,23),random(-180,180),2,random(15,45))
		TNT1 A 0 A_PlaySound("set/spiritexplode")
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet1",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet2",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet3",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		KBS3 B 3 A_CustomMissile("kilmaatikahnGiblet4",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_PlaySound("set/spiritexplode")
		TNT1 A 0 A_CustomMissile("PowerslaveExplosion2kilmaatikahn",12,random(-23,23),random(-180,180),2,random(15,45))
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet5",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet6",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_CustomMissile("kilmaatikahnGiblet7",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		KBS3 B 3 A_CustomMissile("kilmaatikahnGiblet8",12+random(3,6),random(-6,6),random(-180,180),2,random(0,45))
		TNT1 A 0 A_GiveInventory("kilmaatikahnDeathexplosiongroup",1)
		TNT1 A 0 A_JumpIfInventory("kilmaatikahnDeathexplosiongroup",20,1)
		Goto Death+2
		TNT1 A 5 A_NoBlocking
		TNT1 A -1 A_KillMaster
		stop
	}
}

Actor KilmaatSpawnStateCheck : Inventory { Inventory.Amount 1 Inventory.MaxAmount 1 }
Actor kilmaatikahnGiblet1 : MiteGib1 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet2 : MiteGib2 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet3 : MiteGib3 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet4 : MiteGib4 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet5 : MiteGib5 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet6 : MiteGib6 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet7 : MiteGib7 { speed 13 Translation "112:119=216:223","120:127=232:239" }
Actor kilmaatikahnGiblet8 : MiteGib8 { speed 13 Translation "112:119=216:223","120:127=232:239" }

Actor kilmaatikahnTail1
{
    radius 1
    height 1
    scale 0.8
    +NOCLIP
	-SOLID
	+NOINTERACTION
	+CLIENTSIDEONLY
    +NOGRAVITY
    states
    {
	Spawn:
		KBS3 C 13
		stop
    }
}

Actor kilmaatikahnTail2 : kilmaatikahnTail1
{
    states
    {
    Spawn:
		KBS3 C 11
		stop
    }
}
  
Actor kilmaatikahnTail3 : kilmaatikahnTail1
{
    states
    {
    Spawn:
		KBS3 C 9
		stop  
    }
}

Actor kilmaatikahnTail4 : kilmaatikahnTail1
{
    states
    {
    Spawn:
		KBS3 C 7
		stop  
    }
}

Actor kilmaatikahnTail5 : kilmaatikahnTail1
{
    states
    {
    Spawn:
		KBS3 C 5
		stop  
    }
}

Actor kilmaatikahnTail6 : kilmaatikahnTail1
{
    states
    {
    Spawn:
		KBS3 C 3
		stop  
    }
}

Actor kilmaatikahnSnakecheck : Inventory { Inventory.Amount 1 Inventory.MaxAmount 6 }
Actor kilmaatikahnDeathexplosiongroup : Inventory { Inventory.Amount 1 Inventory.MaxAmount 48 }
Actor PowerSlaveExplosion2Kilmaatikahn : PowerSlaveExplosion { Scale 1.10 speed 2 +CLIENTSIDEONLY }